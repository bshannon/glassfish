
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Developing Java Clients</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
<table id="doc-title" cellspacing="0" cellpadding="0">
  <tr>
  <td align="left" valign="top">
  <b>Developing Java Clients</b><br />
  </td>
  </tr>
</table>
<hr />

<table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>
		<td align="left">
		<a href="container_managed-persistence.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="connectors.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a id="GSDVG00012"></a><a id="beakt"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="developing-java-clients">10 Developing Java Clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes how to develop, assemble, and deploy Java
clients.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beaku">Introducing the Application Client Container</a></p>
</li>
<li>
<p><a href="#beakv">Developing Clients Using the ACC</a></p>
</li>
<li>
<p><a href="#gkusn">Developing Clients Without the ACC</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The Web Profile of the OracleGlassFish Server supports the EJB 3.1 Lite
specification, which allows enterprise beans within web applications,
among other features. The full GlassFish Server supports the entire EJB
3.1 specification. For details, see
<a href="http://jcp.org/en/jsr/detail?id=318">JSR 318</a>
(<code>http://jcp.org/en/jsr/detail?id=318</code>).</p>
</div>
<div class="paragraph">
<p>Accordingly, the Application Client Container is supported only in the
full GlassFish Server, not in the Web Profile.</p>
</div>
<div class="paragraph">
<p>JMS resources are supported only in the full GlassFish Server, not in
the Web Profile. See <a href="jms.html#beaob">Using the Java Message Service</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="beaku"></a><a id="GSDVG00159"></a><a id="introducing-the-application-client-container"></a></p>
</div>
<div class="sect2">
<h3 id="_introducing_the_application_client_container">Introducing the Application Client Container</h3>
<div class="paragraph">
<p>The Application Client Container (ACC) includes a set of Java classes,
libraries, and other files that are required for and distributed with
Java client programs that execute in their own Java Virtual Machine
(JVM). The ACC manages the execution of Java EE application client
components (application clients), which are used to access a variety of
Java EE services (such as JMS resources, EJB components, web services,
security, and so on.) from a JVM outside the Oracle GlassFish Server.</p>
</div>
<div class="paragraph">
<p>The ACC communicates with the GlassFish Server using RMI-IIOP protocol
and manages the details of RMI-IIOP communication using the client ORB
that is bundled with it. Compared to other Java EE containers, the ACC
is lightweight.</p>
</div>
<div class="paragraph">
<p>For information about debugging application clients, see
<a href="debugging-apps.html#gekvq">Application Client Debugging</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Interoperability between application clients and GlassFish Servers
running under different major versions is not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="fvymq"></a><a id="GSDVG00459"></a><a id="acc-security"></a></p>
</div>
<div class="sect3">
<h4 id="_acc_security">ACC Security</h4>
<div class="paragraph">
<p>The ACC determines when authentication is needed. This typically occurs
when the client refers to an EJB component that requires authorization
or when annotations in the client&#8217;s <code>main</code> class trigger injection
which, in turn, requires contact with the GlassFish Server&#8217;s naming
service. To authenticate the end user, the ACC prompts for any required
information, such as a username and password. The ACC itself provides a
very simple dialog box to prompt for and read these values.</p>
</div>
<div class="paragraph">
<p>The ACC integrates with the GlassFish Server&#8217;s authentication system. It
also supports SSL (Secure Socket Layer)/IIOP if configured and when
necessary; see <a href="#gckgn">Using RMI/IIOP Over SSL</a>.</p>
</div>
<div class="paragraph">
<p>You can provide an alternate implementation to gather authentication
information, tailored to the needs of the application client. To do so,
include the class to perform these duties in the application client and
identify the fully-qualified name of this class in the
<code>callback-handler</code> element of the <code>application-client.xml</code> descriptor
for the client. The ACC uses this class instead of its default class for
asking for and reading the authentication information. The class must
implement the javax.security.auth.callback.CallbackHandler interface.
See the Java EE specification, section 9.2, Application Clients:
Security, for more details.</p>
</div>
<div class="paragraph">
<p>Application clients can use <a href="securing-apps.html#beacm">Programmatic
Login Using the ProgrammaticLogin Class</a>.</p>
</div>
<div class="paragraph">
<p><a id="fvymv"></a><a id="GSDVG00460"></a><a id="acc-naming"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_acc_naming">ACC Naming</h4>
<div class="paragraph">
<p>The client container enables the application clients to use the Java
Naming and Directory Interface (JNDI) to look up Java EE services (such
as JMS resources, EJB components, web services, security, and so on.)
and to reference configurable parameters set at the time of deployment.</p>
</div>
<div class="paragraph">
<p><a id="gbgfe"></a><a id="GSDVG00461"></a><a id="application-client-annotation"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_application_client_annotation">Application Client Annotation</h4>
<div class="paragraph">
<p>Annotation is supported for the main class and the optional callback
handler class in application clients. For more information, see
"<a href="../application-deployment-guide/overview.html#GSDPG00320">Deployment Descriptors and Annotations</a>" in GlassFish
Server Open Source Edition Application Deployment Guide.</p>
</div>
<div class="paragraph">
<p><a id="gavkg"></a><a id="GSDVG00462"></a><a id="java-web-start"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_java_web_start">Java Web Start</h4>
<div class="paragraph">
<p>Java Web Start allows your application client to be easily launched and
automatically downloaded and updated. It is enabled for all application
clients by default. For more information, see <a href="#gavmf">Using Java Web
Start</a>.</p>
</div>
<div class="paragraph">
<p><a id="gipjj"></a><a id="GSDVG00463"></a><a id="application-client-jar-file"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_application_client_jar_file">Application Client JAR File</h4>
<div class="paragraph">
<p>In GlassFish Server 5.0, the downloaded appclient JAR file is smaller
than in previous releases, with dependent classes in separate JAR files.
When copying the downloaded appclient to another location, make sure to
include the JAR files containing the dependent classes as well. You can
also use the <code>asadmin get-client-stubs</code> command to retrieve the
appclient and all associated application JAR files and place them in
another location.</p>
</div>
<div class="paragraph">
<p><a id="beakv"></a><a id="GSDVG00160"></a><a id="developing-clients-using-the-acc"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_clients_using_the_acc">Developing Clients Using the ACC</h3>
<div class="paragraph">
<p>This section describes the procedure to develop, assemble, and deploy
client applications using the ACC.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beakw">To Access an EJB Component From an Application Client</a></p>
</li>
<li>
<p><a href="#beakx">To Access a JMS Resource From an Application Client</a></p>
</li>
<li>
<p><a href="#gavmf">Using Java Web Start</a></p>
</li>
<li>
<p><a href="#gipkt">Using the Embeddable ACC</a></p>
</li>
<li>
<p><a href="#beaky">Running an Application Client Using the <code>appclient</code>
Script</a></p>
</li>
<li>
<p><a href="#beakz">Using the <code>package-appclient</code> Script</a></p>
</li>
<li>
<p><a href="#fvymy">The <code>client.policy</code> File</a></p>
</li>
<li>
<p><a href="#gckgn">Using RMI/IIOP Over SSL</a></p>
</li>
<li>
<p><a href="#ghbpc">Connecting to a Remote EJB Module Through a Firewall</a></p>
</li>
<li>
<p><a href="#gipkj">Specifying a Splash Screen</a></p>
</li>
<li>
<p><a href="#gjiec">Setting Login Retries</a></p>
</li>
<li>
<p><a href="#gjpjt">Using Libraries with Application Clients</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beakw"></a><a id="GSDVG00072"></a><a id="to-access-an-ejb-component-from-an-application-client"></a></p>
</div>
<div class="sect3">
<h4 id="_to_access_an_ejb_component_from_an_application_client">To Access an EJB Component From an Application Client</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In your client code, reference the EJB component by using an <code>@EJB</code>
annotation or by looking up the JNDI name as defined in the
<code>ejb-jar.xml</code> file.<br>
For more information about naming and lookups, see
<a href="jndi.html#beans">Accessing the Naming Context</a>.<br>
If load balancing is enabled as in Step <a href="#accejb8">7</a> and the EJB
components being accessed are in a different cluster, the endpoint list
must be included in the lookup, as follows:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>corbaname:host1:port1,host2:port2,.../NameService#ejb/jndi-name</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define the <code>@EJB</code> annotations or the <code>ejb-ref</code> elements in the
<code>application-client.xml</code> file. Define the corresponding <code>ejb-ref</code>
elements in the <code>glassfish-application-client.xml</code> file.<br>
For more information on the <code>glassfish-application-client.xml</code> file, see
"<a href="../application-deployment-guide/dd-files.html#GSDPG00081">The glassfish-application-client.xml file</a>" in
GlassFish Server Open Source Edition Application Deployment Guide. For a
general explanation of how to map JNDI names using reference elements,
see <a href="jndi.html#beaoa">Mapping References</a>.</p>
</li>
<li>
<p>Deploy the application client and EJB component together in an
application.<br>
For more information on deployment, see the <a href="../application-deployment-guide/toc.html#GSDPG">GlassFish Server
Open Source Edition Application Deployment Guide</a>. To get the client JAR
file, use the <code>--retrieve</code> option of the <code>asadmin deploy</code> command.<br>
To retrieve the stubs and ties generated during deployment, use the
<code>asadmin get-client-stubs</code> command. For details, see the
<a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition Reference Manual</a>.</p>
</li>
<li>
<p>Ensure that the client JAR file includes the following files:</p>
<div class="ulist">
<ul>
<li>
<p>A Java class to access the bean.</p>
</li>
<li>
<p><code>application-client.xml</code> - (optional) Java EE application client
deployment descriptor.</p>
</li>
<li>
<p><code>glassfish-application-client.xml</code> - (optional) GlassFish Server
specific client deployment descriptor. For information on the
<code>glassfish-application-client.xml</code> file, see "<a href="../application-deployment-guide/dd-files.html#GSDPG00081">The
glassfish-application-client.xml file</a>" in GlassFish Server Open Source
Edition Application Deployment Guide.</p>
</li>
<li>
<p>The <code>MANIFEST.MF</code> file. This file contains a reference to the <code>main</code>
class, which states the complete package prefix and class name of the
Java client.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Prepare the client machine.<br>
This step is not needed for Java Web Start. This step is not needed if
the client and server machines are the same.<br>
If you are using the <code>appclient</code> script, package the GlassFish Server
system files required to launch application clients on remote systems
using the <code>package-appclient</code> script, then retrieve the application
client itself using the <code>asadmin get-client-stubs</code> command.<br>
For more information, see <a href="#beakz">Using the <code>package-appclient</code>
Script</a> and the <a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition
Reference Manual</a>.</p>
</li>
<li>
<p>To access EJB components that are residing in a remote system, make
the following changes to the <code>sun-acc.xml</code> file or the <code>appclient</code>
script. This step is not needed for Java Web Start.</p>
<div class="ulist">
<ul>
<li>
<p>Define the <code>target-server</code> element&#8217;s <code>address</code> and <code>port</code> attributes
to reference the remote server machine and its ORB port. See
"<a href="../application-deployment-guide/dd-elements.html#GSDPG00284">target-server</a>" in GlassFish Server Open Source
Edition Application Deployment Guide.</p>
</li>
<li>
<p>Use the <code>-targetserver</code> option of the appclient script to reference
the remote server machine and its ORB port. For more information, see
<a href="#beaky">Running an Application Client Using the <code>appclient</code> Script</a>.<br>
To determine the ORB port on the remote server, use the <code>asadmin get</code>
command. For example:<br></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin --host rmtsrv get server-config.iiop-service.iiop-listener.iiop-listener1.port</pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>asadmin get</code> command, see the
<a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition Reference Manual</a>.
7.  <a id="accejb8"></a><br>
To set up load balancing and failover of remote EJB references, define
at least two <code>target-server</code> elements in the <code>sun-acc.xml</code> file or the
<code>appclient</code> script. This step is not needed for Java Web Start.<br>
If the GlassFish Server instance on which the application client is
deployed participates in a cluster, the ACC finds all currently active
IIOP endpoints in the cluster automatically. However, a client should
have at least two endpoints specified for bootstrapping purposes, in
case one of the endpoints has failed.<br>
The <code>target-server</code> elements in the <code>sun-acc.xml</code> file specify one or
more IIOP endpoints used for load balancing. The <code>address</code> attribute is
an IPv4 address or host name, and the <code>port</code> attribute specifies the
port number. See "<a href="../application-deployment-guide/dd-elements.html#GSDPG00111">client-container</a>" in GlassFish
Server Open Source Edition Application Deployment Guide.<br>
The <code>--targetserver</code> option of the appclient script specifies one or
more IIOP endpoints used for load balancing. For more information, see
<a href="#beaky">Running an Application Client Using the <code>appclient</code> Script</a>.</p>
</div>
<div id="GSDVG555" class="paragraph">
<p>Next Steps</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For instructions on running the application client, see
<a href="#gavmf">Using Java Web Start</a> or <a href="#beaky">Running an Application
Client Using the <code>appclient</code> Script</a>.</p>
</li>
<li>
<p>For more information about RMI-IIOP load balancing and failover, see
"<a href="../ha-administration-guide/rmi-iiop.html#GSHAG00013">RMI-IIOP Load Balancing and Failover</a>" in GlassFish
Server Open Source Edition High Availability Administration Guide.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beakx"></a><a id="GSDVG00073"></a><a id="to-access-a-jms-resource-from-an-application-client"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_access_a_jms_resource_from_an_application_client">To Access a JMS Resource From an Application Client</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a JMS client.<br>
For detailed instructions on developing a JMS client, see
"https://javaee.github.io/tutorial/jms-examples.html[Java Message
Service Examples]" in The Java EE 8 Tutorial.</p>
</li>
<li>
<p>Next, configure a JMS resource on the GlassFish Server.<br>
For information on configuring JMS resources, see
"<a href="../administration-guide/jms.html#GSADG00598">Administering JMS Connection Factories and
Destinations</a>" in GlassFish Server Open Source Edition Administration
Guide.</p>
</li>
<li>
<p>Define the <code>@Resource</code> or <code>@Resources</code> annotations or the
<code>resource-ref</code> elements in the <code>application-client.xml</code> file. Define the
corresponding <code>resource-ref</code> elements in the
<code>glassfish-application-client.xml</code> file.<br>
For more information on the <code>glassfish-application-client.xml</code> file, see
"<a href="../application-deployment-guide/dd-files.html#GSDPG00081">The glassfish-application-client.xml file</a>" in
GlassFish Server Open Source Edition Application Deployment Guide. For a
general explanation of how to map JNDI names using reference elements,
see <a href="jndi.html#beaoa">Mapping References</a>.</p>
</li>
<li>
<p>Ensure that the client JAR file includes the following files:</p>
<div class="ulist">
<ul>
<li>
<p>A Java class to access the resource.</p>
</li>
<li>
<p><code>application-client.xml</code> - (optional) Java EE application client
deployment descriptor.</p>
</li>
<li>
<p><code>glassfish-application-client.xml</code> - (optional) GlassFish Server
specific client deployment descriptor. For information on the
<code>glassfish-application-client.xml</code> file, see "<a href="../application-deployment-guide/dd-files.html#GSDPG00081">The
glassfish-application-client.xml file</a>" in GlassFish Server Open Source
Edition Application Deployment Guide.</p>
</li>
<li>
<p>The <code>MANIFEST.MF</code> file. This file contains a reference to the <code>main</code>
class, which states the complete package prefix and class name of the
Java client.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Prepare the client machine.<br>
This step is not needed for Java Web Start. This step is not needed if
the client and server machines are the same.<br>
If you are using the <code>appclient</code> script, package the GlassFish Server
system files required to launch application clients on remote systems
using the <code>package-appclient</code> script, then retrieve the application
client itself using the <code>asadmin get-client-stubs</code> command.<br>
For more information, see <a href="#beakz">Using the <code>package-appclient</code>
Script</a> and the <a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition
Reference Manual</a>.</p>
</li>
<li>
<p>Run the application client.<br>
See <a href="#gavmf">Using Java Web Start</a> or <a href="#beaky">Running an
Application Client Using the <code>appclient</code> Script</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="gavmf"></a><a id="GSDVG00464"></a><a id="using-java-web-start"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_java_web_start">Using Java Web Start</h4>
<div class="paragraph">
<p>Java Web Start allows your application client to be easily launched and
automatically downloaded and updated. General information about Java Web
Start is available at
<code>http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html</code>.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gavqb">Enabling and Disabling Java Web Start</a></p>
</li>
<li>
<p><a href="#gavmk">Downloading and Launching an Application Client</a></p>
</li>
<li>
<p><a href="#gavor">The Application Client URL</a></p>
</li>
<li>
<p><a href="#gcjlg">Signing JAR Files Used in Java Web Start</a></p>
</li>
<li>
<p><a href="#geqxg">Error Handling</a></p>
</li>
<li>
<p><a href="#geqwd">Vendor Icon, Splash Screen, and Text</a></p>
</li>
<li>
<p><a href="#gkmbs">Creating a Custom JNLP File</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gavqb"></a><a id="GSDVG00312"></a><a id="enabling-and-disabling-java-web-start"></a></p>
</div>
<div class="sect4">
<h5 id="_enabling_and_disabling_java_web_start">Enabling and Disabling Java Web Start</h5>
<div class="paragraph">
<p>Java Web Start is enabled for all application clients by default.</p>
</div>
<div class="paragraph">
<p>The application developer or deployer can specify that Java Web Start is
always disabled for an application client by setting the value of the
<code>eligible</code> element to <code>false</code> in the <code>glassfish-application-client.xml</code>
file. See the <a href="../application-deployment-guide/toc.html#GSDPG">GlassFish Server Open Source Edition
Application Deployment Guide</a>.</p>
</div>
<div class="paragraph">
<p>The GlassFish Server administrator can disable Java Web Start for a
previously deployed eligible application client using the <code>asadmin set</code>
command.</p>
</div>
<div class="paragraph">
<p>To disable Java Web Start for all eligible application clients in an
application, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin set applications.application.app-name.property.java-web-start-enabled="false"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To disable Java Web Start for a stand-alone eligible application client,
use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin set applications.application.module-name.property.java-web-start-enabled="false"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Setting <code>java-web-start-enabled="true"</code> re-enables Java Web Start for an
eligible application client. For more information about the
<code>asadmin set</code> command, see the <a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source
Edition Reference Manual</a>.</p>
</div>
<div class="paragraph">
<p><a id="gavmk"></a><a id="GSDVG00313"></a><a id="downloading-and-launching-an-application-client"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_downloading_and_launching_an_application_client">Downloading and Launching an Application Client</h5>
<div class="paragraph">
<p>If Java Web Start is enabled for your deployed application client, you
can launch it for testing. Simply click on the Launch button next to the
application client or application&#8217;s listing on the App Client Modules
page in the Administration Console.</p>
</div>
<div class="paragraph">
<p>On other machines, you can download and launch the application client
using Java Web Start in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using a web browser, directly enter the URL for the application
client. See <a href="#gavor">The Application Client URL</a>.</p>
</li>
<li>
<p>Click on a link to the application client from a web page.</p>
</li>
<li>
<p>Use the Java Web Start command <code>javaws</code>, specifying the URL of the
application client as a command line argument.</p>
</li>
<li>
<p>If the application has previously been downloaded using Java Web
Start, you have additional alternatives.</p>
<div class="ulist">
<ul>
<li>
<p>Use the desktop icon that Java Web Start created for the application
client. When Java Web Start downloads an application client for the
first time it asks you if such an icon should be created.</p>
</li>
<li>
<p>Use the Java Web Start control panel to launch the application
client.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you launch an application client, Java Web Start contacts the
server to see if a newer client version is available. This means you can
redeploy an application client without having to worry about whether
client machines have the latest version.</p>
</div>
<div class="paragraph">
<p><a id="gavor"></a><a id="GSDVG00314"></a><a id="the-application-client-url"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_application_client_url">The Application Client URL</h5>
<div class="paragraph">
<p>The default URL for an application or module generally is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">http://host:port/context-root</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default URL for a stand-alone application client module is as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">http://host:port/appclient-module-id</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default URL for an application client module embedded within an
application is as follows. Note that the relative path to the
application client JAR file is included.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">http://host:port/application-id/appclient-path</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the context-root, appclient-module-id, or application-id is not
specified during deployment, the name of the JAR or EAR file without the
extension is used. If the application client module or application is
not in JAR or EAR file format, an appclient-module-id or application-id
is generated.</p>
</div>
<div class="paragraph">
<p>Regardless of how the context-root or id is determined, it is written to
the server log when you deploy the application. For details about
naming, see "<a href="../application-deployment-guide/overview.html#GSDPG00323">Naming Standards</a>" in GlassFish Server
Open Source Edition Application Deployment Guide.</p>
</div>
<div class="paragraph">
<p>To set a different URL for an application client, use the <code>context-root</code>
subelement of the <code>java-web-start-access</code> element in the
<code>glassfish-application-client.xml</code> file. This overrides the
appclient-module-id or application-id. See the <a href="../application-deployment-guide/toc.html#GSDPG">GlassFish
Server Open Source Edition Application Deployment Guide</a>.</p>
</div>
<div class="paragraph">
<p>You can also pass arguments to the ACC or to the application client&#8217;s
<code>main</code> method as query parameters in the URL. If multiple application
client arguments are specified, they are passed in the order specified.</p>
</div>
<div class="paragraph">
<p>A question mark separates the context root from the arguments.
Ampersands (<code>&amp;</code>) separate the arguments and their values. Each argument
and each value must begin with <code>arg=</code>. Here is an example URL with a
<code>-color</code> argument for a stand-alone application client. The <code>-color</code>
argument is passed to the application client&#8217;s <code>main</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">http://localhost:8080/testClient?arg=-color&amp;arg=red</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you are using the <code>javaws</code> URL command to launch Java Web Start with
a URL that contains arguments, enclose the URL in double quotes (<code>"</code>) to
avoid breaking the URL at the ampersand (<code>&amp;</code>) symbol.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ideally, you should build your production application clients with
user-friendly interfaces that collect information which might otherwise
be gathered as command-line arguments. This minimizes the degree to
which users must customize the URLs that launch application clients
using Java Web Start. Command-line argument support is useful in a
development environment and for existing application clients that depend
on it.</p>
</div>
<div class="paragraph">
<p><a id="gcjlg"></a><a id="GSDVG00315"></a><a id="signing-jar-files-used-in-java-web-start"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_signing_jar_files_used_in_java_web_start">Signing JAR Files Used in Java Web Start</h5>
<div class="paragraph">
<p>Java Web Start enforces a security sandbox. By default it grants any
application, including application clients, only minimal privileges.
Because Java Web Start applications can be so easily downloaded, Java
Web Start provides protection from potentially harmful programs that
might be accessible over the network. If an application requires a
higher privilege level than the sandbox permits, the code that needs
privileges must be in a JAR file that was signed.</p>
</div>
<div class="paragraph">
<p>When Java Web Start downloads such a signed JAR file, it displays
information about the certificate that was used to sign the JAR if that
certificate is not trusted. It then asks you whether you want to trust
that signed code. If you agree, the code receives elevated permissions
and runs. If you reject the signed code, Java Web Start does not start
the downloaded application.</p>
</div>
<div class="paragraph">
<p>Your first Java Web Start launch of an application client is likely to
involve this prompting because by default GlassFish Server uses a
self-signed certificate that is not linked to a trusted authority.</p>
</div>
<div class="paragraph">
<p>The GlassFish Server serves two types of signed JAR files in response to
Java Web Start requests. One type is a JAR file installed as part of the
GlassFish Server, which starts an application client during a Java Web
Start launch: as-install`/lib/gf-client.jar`.</p>
</div>
<div class="paragraph">
<p>The other type is a generated application client JAR file. As part of
deployment, the GlassFish Server generates a new application client JAR
file that contains classes, resources, and descriptors needed to run the
application client on end-user systems. When you deploy an application
with the <code>asadmin deploy</code> command&#8217;s <code>--retrieve</code> option, use the
<code>asadmin get-client-stubs</code> command, or select the Generate RMIStubs
option from the EJB Modules deployment page in the Administration
Console, this is one of the JAR files retrieved to your system. Because
application clients need access beyond the minimal sandbox permissions
to work in the Java Web Start environment, the generated application
client JAR file must be signed before it can be downloaded to and
executed on an end-user system.</p>
</div>
<div class="paragraph">
<p>A JAR file can be signed automatically or manually.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gcjmd">Automatically Signing JAR Files</a></p>
</li>
<li>
<p><a href="#gcjlr">Using the <code>jar-signing-alias</code> Deployment Property</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gcjmd"></a><a id="GSDVG00038"></a><a id="automatically-signing-jar-files"></a></p>
</div>
<div class="paragraph">
<p>Automatically Signing JAR Files</p>
</div>
<div class="paragraph">
<p>The GlassFish Server automatically creates a signed version of the
required JAR file if none exists. When a Java Web Start request for the
<code>gf-client.jar</code> file arrives, the GlassFish Server looks for
domain-dir`/java-web-start/gf-client.jar`. When a request for an
application&#8217;s generated application client JAR file arrives, the
GlassFish Server looks in the directory
domain-dir`/java-web-start/`app-name for a file with the same name as
the generated JAR file created during deployment.</p>
</div>
<div class="paragraph">
<p>In either case, if the requested signed JAR file is absent or older than
its unsigned counterpart, the GlassFish Server creates a signed version
of the JAR file automatically and deposits it in the relevant directory.
Whether the GlassFish Server just signed the JAR file or not, it serves
the file from the domain-dir`/java-web-start` directory tree in response
to the Java Web Start request.</p>
</div>
<div class="paragraph">
<p>To sign these JAR files, by default the GlassFish Server uses its
self-signed certificate. When you create a new domain, either by
installing the GlassFish Server or by using the <code>asadmin create-domain</code>
command, the GlassFish Server creates a self-signed certificate and adds
it to the domain&#8217;s key store.</p>
</div>
<div class="paragraph">
<p>A self-signed certificate is generally untrustworthy because no
certification authority vouches for its authenticity. The automatic
signing feature uses the same certificate to create all required signed
JAR files.</p>
</div>
<div class="paragraph">
<p>Starting with Java SE 7 Update 21, stricter security is enforced for
applications launched using Java Web Start. Application users will see
various security messages, depending on their Java security settings. If
Java security is set to Very High on their systems, users will not be
able to launch application clients signed using the GlassFish Server
self-signed certificate.</p>
</div>
<div class="paragraph">
<p>To minimize impacts to application users, all Java Web Start
applications should be signed with a trusted certificate instead of the
GlassFish Server self-signed certificate. If you use the GlassFish
Server Java Web Start feature or deploy applications that provide their
own Java Web Start applications, perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtain a trusted certificate from a certification authority if your
organization does not already have one.</p>
</li>
<li>
<p>Stop GlassFish Server.</p>
</li>
<li>
<p>Replace the GlassFish Server self-signed certificate with the
trusted certificate by importing the trusted certificate into the
GlassFish Server keystore using the <code>s1as</code> alias. By default, the
keystore is located at domain-dir`/config/keystore.jks`.<br>
For more information about importing a trusted certificate into the
domain keystore, see "<a href="../security-guide/system-security.html#GSSCG00147">Administering JSSE Certificates</a>"
in GlassFish Server Open Source Edition Security Guide.</p>
</li>
<li>
<p>Delete any signed JARs already generated by GlassFish Server:</p>
</li>
<li>
<p>At the command prompt, type:<br>
<code>rm -rf</code> domain-dir`/java_web_start`</p>
</li>
<li>
<p>For each application that contains an application client launched
using Java Web Start, type:<br>
<code>rm -rf</code> domain-dir`/generated/xml/<code>app-name</code>/signed`</p>
</li>
<li>
<p>Restart GlassFish Server.</p>
</li>
<li>
<p>Ensure that the Java security setting on user systems is set to Very
High.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After you perform these steps, the first time a user launches an
application client on their system, Java Web Start detects that the
server&#8217;s signed JARs are newer than those cached on the user&#8217;s system
and downloads them again. This happens on the first launch only,
regardless of the client. Even though the application client is now
signed using a trusted certificate, users will again be asked whether to
trust the downloaded application and can choose to skip that prompt for
future launches.</p>
</div>
<div class="paragraph">
<p><a id="gcjlr"></a><a id="GSDVG00039"></a><a id="using-the-jar-signing-alias-deployment-property"></a></p>
</div>
<div class="paragraph">
<p>Using the <code>jar-signing-alias</code> Deployment Property</p>
</div>
<div class="paragraph">
<p>The <code>asadmin deploy</code> command property <code>jar-signing-alias</code> specifies the
alias for the security certificate with which the application client
container JAR file is signed.</p>
</div>
<div class="paragraph">
<p>Java Web Start won&#8217;t execute code requiring elevated permissions unless
it resides in a JAR file signed with a certificate that the user&#8217;s
system trusts. For your convenience, GlassFish Server signs the JAR file
automatically using the self-signed certificate from the domain, <code>s1as</code>.
Java Web Start then asks the user whether to trust the code and displays
the GlassFish Server certificate information.</p>
</div>
<div class="paragraph">
<p>To sign this JAR file with a different certificate, first add the
certificate to the domain keystore. You can use a certificate from a
trusted authority, which avoids the Java Web Start prompt. To add a
certificate to the domain keystore, see "<a href="../security-guide/system-security.html#GSSCG00147">Administering
JSSE Certificates</a>" in GlassFish Server Open Source Edition Security
Guide.</p>
</div>
<div class="paragraph">
<p>Next, deploy your application using the <code>jar-signing-alias</code> property.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin deploy --property jar-signing-alias=MyAlias MyApp.ear</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>asadmin deploy</code> command, see the
<a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition Reference Manual</a>.</p>
</div>
<div class="paragraph">
<p><a id="geqxg"></a><a id="GSDVG00316"></a><a id="error-handling"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_error_handling">Error Handling</h5>
<div class="paragraph">
<p>When an application client is launched using Java Web Start, any error
that the application client logic does not catch and handle is written
to <code>System.err</code> and displayed in a dialog box. This display appears if
an error occurs even before the application client logic receives
control. It also appears if the application client code does not catch
and handle errors itself.</p>
</div>
<div class="paragraph">
<p><a id="geqwd"></a><a id="GSDVG00317"></a><a id="vendor-icon-splash-screen-and-text"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_vendor_icon_splash_screen_and_text">Vendor Icon, Splash Screen, and Text</h5>
<div class="paragraph">
<p>To specify a vendor-specific icon, splash screen, text string, or a
combination of these for Java Web Start download and launch screens, use
the <code>vendor</code> element in the <code>glassfish-application-client.xml</code> file. The
complete format of this element&#8217;s data is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;vendor&gt;icon-image-URI::splash-screen-image-URI::vendor-text&lt;/vendor&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example vendor element contains an icon, a splash screen,
and a text string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;vendor&gt;images/icon.jpg::otherDir/splash.jpg::MyCorp, Inc.&lt;/vendor&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example vendor element contains an icon and a text string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;vendor&gt;images/icon.jpg::MyCorp, Inc.&lt;/vendor&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example vendor element contains a splash screen and a text
string; note the initial double colon:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;vendor&gt;::otherDir/splash.jpg::MyCorp, Inc.&lt;/vendor&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example vendor element contains only a text string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;vendor&gt;MyCorp, Inc.&lt;/vendor&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default value is the text string <code>Application Client</code>.</p>
</div>
<div class="paragraph">
<p>For more information about the <code>glassfish-application-client.xml</code> file,
see the <a href="../application-deployment-guide/toc.html#GSDPG">GlassFish Server Open Source Edition Application
Deployment Guide</a>.</p>
</div>
<div class="paragraph">
<p>You can also specify a vendor-specific icon, splash screen, text string,
or a combination by using a custom JNLP file; see <a href="#gkmbs">Creating a
Custom JNLP File</a>.</p>
</div>
<div class="paragraph">
<p><a id="gkmbs"></a><a id="GSDVG00318"></a><a id="creating-a-custom-jnlp-file"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_creating_a_custom_jnlp_file">Creating a Custom JNLP File</h5>
<div class="paragraph">
<p>You can partially customize the Java Network Launching Protocol (JNLP)
file that GlassFish Server uses for Java Web Start.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gkmco">Specifying the JNLP File in the Deployment Descriptor</a></p>
</li>
<li>
<p><a href="#gkmbq">Referring to JAR Files from the JNLP File</a></p>
</li>
<li>
<p><a href="#gkmbt">Referring to Other JNLP Files</a></p>
</li>
<li>
<p><a href="#gkmbr">Combining Custom and Automatically Generated Content</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about JNLP, see the
<a href="http://java.sun.com/javase/technologies/desktop/javawebstart/download-spec.html">Java
Web Start Architecture JNLP Specification and API Documentation</a>
(<code>http://java.sun.com/javase/technologies/desktop/javawebstart/download-spec.html</code>).</p>
</div>
<div class="paragraph">
<p><a id="gkmco"></a><a id="GSDVG00040"></a><a id="specifying-the-jnlp-file-in-the-deployment-descriptor"></a></p>
</div>
<div class="paragraph">
<p>Specifying the JNLP File in the Deployment Descriptor</p>
</div>
<div class="paragraph">
<p>To specify a custom JNLP file for Java Web Start, use the <code>jnlp-doc</code>
element in the <code>glassfish-application-client.xml</code> file. If none is
specified, a default JNLP file is generated.</p>
</div>
<div class="paragraph">
<p>The value of the <code>jnlp-doc</code> element is a relative path with the
following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">[path-to-JAR-in-EAR!]path-to-JNLP-in-JAR</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default path-to-JAR-in-EAR is the current application client JAR
file. For example, if the JNLP file is in the application client JAR
file at <code>custom/myInfo.jnlp</code>, the element value would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;java-web-start-access&gt;
   &lt;jnlp-doc&gt;custom/myInfo.jnlp&lt;/jnlp-doc&gt;
&lt;/java-web-start-access&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the application client is inside an EAR file, you can place the
custom JNLP file inside another JAR file in the EAR. For example, if the
JNLP file is in a JAR file at <code>other/myLib.jar</code>, the element value would
look like this, with an exclamation point (<code>!</code>) separating the path to
the JAR from the path in the JAR:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;java-web-start-access&gt;
   &lt;jnlp-doc&gt;other/myLib.jar!custom/myInfo.jnlp&lt;/jnlp-doc&gt;
&lt;/java-web-start-access&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>glassfish-application-client.xml</code> file,
see the GlassFish Server Open Source Edition Application Deployment
Guide.</p>
</div>
<div class="paragraph">
<p><a id="gkmbq"></a><a id="GSDVG00041"></a><a id="referring-to-jar-files-from-the-jnlp-file"></a></p>
</div>
<div class="paragraph">
<p>Referring to JAR Files from the JNLP File</p>
</div>
<div class="paragraph">
<p>As with any JNLP document, the custom JNLP file can refer to JAR files
the application client requires.</p>
</div>
<div class="paragraph">
<p>Do not specify every JAR on which the client depends. GlassFish Server
automatically handles JAR files that the Java EE specification requires
to be available to the application client. This includes JAR files
listed in the application client JAR file&#8217;s manifest <code>Class-Path</code> and
JAR files in the EAR file&#8217;s library directory (if any) and their
transitive closures. The custom JNLP file should specify only those JAR
files the client needs that GlassFish Server would not otherwise
include.</p>
</div>
<div class="paragraph">
<p>Package these JAR files in the EAR file, as with any JAR file required
by an application client. Use relative URIs in the <code>&lt;jar href="..."&gt;</code>
and <code>&lt;nativelib href="..."&gt;</code> elements to point to the JAR files. The
codebase that GlassFish Server assigns for the final client JNLP file
corresponds to the top level of the EAR file. Therefore, relative <code>href</code>
references correspond directly to the relative path to the JAR files
within the EAR file.</p>
</div>
<div class="paragraph">
<p>Neither the Java EE specification nor GlassFish Server supports
packaging JAR files inside the application client JAR file itself.
Nothing prevents this, but GlassFish Server does no special processing
of such JAR files. They do not appear in the runtime class path and they
cannot be referenced from the custom JNLP file.</p>
</div>
<div class="paragraph">
<p><a id="gkmbt"></a><a id="GSDVG00042"></a><a id="referring-to-other-jnlp-files"></a></p>
</div>
<div class="paragraph">
<p>Referring to Other JNLP Files</p>
</div>
<div class="paragraph">
<p>The JNLP file can also refer to other custom JNLP files using
<code>&lt;extension href="..."/&gt;</code> elements. To be consistent with relative
<code>href</code> references to JAR files, the relative <code>href</code> references to JNLP
files are resolved within the EAR file. You can place these JNLP files
directly in the EAR file or inside JAR files that the EAR file contains.
Use one of these formats for these <code>href</code> references:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">[path-to-JAR-in-EAR!]path-to-JNLP-in-JAR

path-to-JNLP-in-EAR</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that these formats are not equivalent to the format of the
<code>jnlp-doc</code> element in the <code>glassfish-application-client.xml</code> file.</p>
</div>
<div class="paragraph">
<p>These formats follow the standard entry-within-a-JAR URI syntax and
semantics. Support for this syntax comes from the automated Java Web
Start support in GlassFish Server. This is not a feature of Java Web
Start or the JNLP standard.</p>
</div>
<div class="paragraph">
<p><a id="gkmbr"></a><a id="GSDVG00043"></a><a id="combining-custom-and-automatically-generated-content"></a></p>
</div>
<div class="paragraph">
<p>Combining Custom and Automatically Generated Content</p>
</div>
<div class="paragraph">
<p>GlassFish Server recognizes these types of content in the JNLP file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Owned — GlassFish Server owns the content and ignores any custom
content</p>
</li>
<li>
<p>Merged — Automatically generated content and custom content are merged</p>
</li>
<li>
<p>Defaulted — Custom content is used if present, otherwise default
content is provided</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can compose a complete JNLP file and package it with the application
client. GlassFish Server then combines it with its automatically
generated JNLP file. You can also provide content that only adds to or
replaces what GlassFish Server generates. The custom content must
conform to the general structure of the JNLP format so that GlassFish
Server can properly place it in the final JNLP file.</p>
</div>
<div class="paragraph">
<p>For example, to specify a single native library to be included only for
Windows systems, the new element to add might be as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;nativelib href="windows/myLib.jar"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, you must indicate where in the overall document this element
belongs. The actual custom JNLP file should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
   &lt;resources os="Windows"&gt;
      &lt;nativelib href="windows/myLib.jar"/&gt;
   &lt;/resources&gt;
&lt;/jnlp&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>GlassFish Server provides default <code>&lt;information&gt;</code> and <code>&lt;resources&gt;</code>
elements, without specifying attributes such as <code>os</code>, <code>arch</code>,
<code>platform</code>, or <code>locale</code>. GlassFish Server merges its own content within
those elements with custom content under those elements. Further, you
can provide your own <code>&lt;information&gt;</code> and <code>&lt;resources&gt;</code> elements (and
fragments within them) that specify at least one of these attributes.</p>
</div>
<div class="paragraph">
<p>In general, you can perform the following customizations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Override the GlassFish Server defaults for the child elements of
<code>&lt;information&gt;</code> elements that have no attribute settings for <code>os</code>,
<code>arch</code>, <code>platform</code>, and <code>locale</code>. Among these child elements are
<code>&lt;title&gt;</code>, <code>&lt;vendor&gt;</code>, <code>&lt;description&gt;</code>, <code>&lt;icon&gt;</code>, and so on.</p>
</li>
<li>
<p>Add <code>&lt;information&gt;</code> elements with <code>os</code>, <code>arch</code>, <code>platform</code>, or
<code>locale</code> settings. You can also add child elements.</p>
</li>
<li>
<p>Add child elements of <code>&lt;resources&gt;</code> elements that have no attribute
settings for <code>os</code>, <code>arch</code>, or <code>locale</code>. Among these child elements are
<code>&lt;jar&gt;</code>, <code>&lt;property&gt;</code>, <code>&lt;nativelib&gt;</code>, and so on. You can also customize
attributes of the <code>&lt;java&gt;</code> child element.</p>
</li>
<li>
<p>Add <code>&lt;resources&gt;</code> elements that specify at least one of <code>os</code>, <code>arch</code>,
or <code>locale</code>. You can also add child elements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This flexibility allows you to add JAR files to the application
(including platform-specific native libraries) and set properties to
control the behavior of your application clients.</p>
</div>
<div class="paragraph">
<p>The following tables provide more detail about what parts of the JNLP
file you can add to and modify.</p>
</div>
<div class="paragraph">
<p><a id="GSDVG556"></a><a id="sthref24"></a><a id="gkmbk"></a></p>
</div>
<div class="paragraph">
<p>Table 10-1 Owned JNLP File Content</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 32%;">
<col style="width: 68%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JNLP File Fragment</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp codebase="xxx" ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server controls this content for application clients
packaged in EAR files. The developer controls this content for
application clients packaged in WAR files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp href="xxx" ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server controls this content for application clients
packaged in EAR files. The developer controls this content for
application clients packaged in WAR files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;security&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server must control the permissions requested for each JNLP
file. All permissions are needed for the main file, which launches the
ACC. The permissions requested for other JNLP documents depend on
whether the JAR files referenced in those documents are signed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;application-desc&gt;
    &lt;argument&gt; ...</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server sets the <code>main-class</code> and the arguments to be passed
to the client.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GSDVG557"></a><a id="sthref25"></a><a id="gkmci"></a></p>
</div>
<div class="paragraph">
<p>Table 10-2 Defaulted JNLP File Content</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JNLP File Fragment</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp spec="xxx" ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the JNLP specification version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;information [no-attributes]&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the application title, vendor, home page, various
description text values, icon images, and whether offline execution is
allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;resources [no-attributes]&gt;
    &lt;java version="xxx"
        java-vm-args="yyy" ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Java SE version or selected VM parameter settings.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GSDVG558"></a><a id="sthref26"></a><a id="gkmcc"></a></p>
</div>
<div class="paragraph">
<p>Table 10-3 Merged JNLP File Content</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 37%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JNLP File Fragment</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;information [attributes]&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You can specify one or more of the <code>os</code>, <code>arch</code>, <code>platform</code>, and
<code>locale</code> attributes for the <code>&lt;information&gt;</code> element. You can also
specify child elements; GlassFish Server provides no default children.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;resources [attributes]&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You can specify one or more of the <code>os</code>, <code>arch</code>, <code>platform</code>, and
<code>locale</code> attributes for the <code>&lt;resources&gt;</code> element. You can also specify
child elements; GlassFish Server provides no default children.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;resources [no-attributes]&gt;
    &lt;jar ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds JAR files to be included in the application to the JAR files
provided by GlassFish Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;resources [no-attributes]&gt;
    &lt;nativelib ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds native libraries to be included in the application. Each entry in
a JAR listed in a <code>&lt;nativelib&gt;</code> element must be a native library for the
correct platform. The full syntax of the <code>&lt;nativelib&gt;</code> element lets the
developer specify the platform for that native library.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;resources [no-attributes]&gt;
    &lt;property ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds system properties to be included in the application to the system
properties defined by GlassFish Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;resources [no-attributes]&gt;
    &lt;extension ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies another custom JNLP file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;component-desc ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes another custom JNLP file that specifies a component
extension.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;jnlp&gt;
  &lt;installer-desc ...&gt;</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes another custom JNLP file that specifies an installer
extension.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="gipkt"></a><a id="GSDVG00465"></a><a id="using-the-embeddable-acc"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_embeddable_acc">Using the Embeddable ACC</h4>
<div class="paragraph">
<p>You can embed the ACC into your application client. If you place the
as-install`/lib/gf-client.jar` file in your runtime classpath, your
application creates the ACC after your application code has started,
then requests that the ACC start the application client portion. The
basic model for coding is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a builder object.</p>
</li>
<li>
<p>Operate on the builder to configure the ACC.</p>
</li>
<li>
<p>Obtain a new ACC instance from the builder.</p>
</li>
<li>
<p>Present a client archive or class to the ACC instance.</p>
</li>
<li>
<p>Start the client running within the newly created ACC instance.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your code should follow this general pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">// one TargetServer for each ORB endpoint for bootstrapping
TargetServer[] servers = ...;

// Get a builder to set up the ACC
AppClientContainer.Builder builder = AppClientContainer.newBuilder(servers);

// Fine-tune the ACC's configuration. Note ability to "chain" invocations.
builder.callbackHandler("com.acme.MyHandler").authRealm("myRealm"); // Modify config

// Get a container for a client.
URI clientURI = ...; // URI to the client JAR
AppClientContainer acc = builder.newContainer(clientURI);

or

Class mainClass = ...;
AppClientContainer acc = builder.newContainer(mainClass);

// In either case, start the client running.
String[] appArgs = ...;
acc.startClient(appArgs); // Start the client

...

acc.close(); // close the ACC(optional)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ACC loads the application client&#8217;s <code>main</code> class, performs any
required injection, and transfers control to the <code>static main</code> method.
The ACC&#8217;s <code>run</code> method returns to the calling application as soon as the
client&#8217;s <code>main</code> method returns to the ACC.</p>
</div>
<div class="paragraph">
<p>If the application client&#8217;s <code>main</code> method starts any asynchronous
activity, that work continues after the ACC returns. The ACC has no
knowledge of whether the client&#8217;s <code>main</code> method triggers asynchronous
work. Therefore, if the client causes work on threads other than the
calling thread, and if the embedding application needs to know when the
client&#8217;s asynchronous work completes, the embedding application and the
client must agree on how this happens.</p>
</div>
<div class="paragraph">
<p>The ACC&#8217;s shutdown handling is invoked from the ACC&#8217;s <code>close</code> method.
The calling application can invoke <code>acc.close()</code> to close down any
services started by the ACC. If the application client code started any
asynchronous activity that might still depend on ACC services, invoking
<code>close</code> before that asynchronous activity completes could cause
unpredictable and undesirable results. The shutdown handling is also run
automatically at VM shutdown if the code has not invoked <code>close</code> before
then.</p>
</div>
<div class="paragraph">
<p>The ACC does not prevent the calling application from creating or
running more than one ACC instance during a single execution of the
application either serially or concurrently. However, other services
used by the ACC (transaction manager, security, ORB, and so on) might or
might not support such serial or concurrent reuse.</p>
</div>
<div class="paragraph">
<p><a id="beaky"></a><a id="GSDVG00466"></a><a id="running-an-application-client-using-the-appclient-script"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_running_an_application_client_using_the_code_appclient_code_script">Running an Application Client Using the <code>appclient</code> Script</h4>
<div class="paragraph">
<p>To run an application client, you can launch the ACC using the
<code>appclient</code> script, whether or not Java Web Start is enabled. This is
optional. This script is located in the as-install`/bin` directory. For
details, see the <a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition
Reference Manual</a>.</p>
</div>
<div class="paragraph">
<p><a id="beakz"></a><a id="GSDVG00467"></a><a id="using-the-package-appclient-script"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_code_package_appclient_code_script">Using the <code>package-appclient</code> Script</h4>
<div class="paragraph">
<p>You can package the GlassFish Server system files required to launch
application clients on remote systems into a single JAR file using the
<code>package-appclient</code> script. This is optional. This script is located in
the as-install`/bin` directory. For details, see the
<a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition Reference Manual</a>.</p>
</div>
<div class="paragraph">
<p><a id="fvymy"></a><a id="GSDVG00468"></a><a id="the-client.policy-file"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_code_client_policy_code_file">The <code>client.policy</code> File</h4>
<div class="paragraph">
<p>The <code>client.policy</code> file is the J2SE policy file used by the application
client. Each application client has a <code>client.policy</code> file. The default
policy file limits the permissions of Java EE deployed application
clients to the minimal set of permissions required for these
applications to operate correctly. If an application client requires
more than this default set of permissions, edit the <code>client.policy</code> file
to add the custom permissions that your application client needs. Use
the J2SE standard policy tool or any text editor to edit this file.</p>
</div>
<div class="paragraph">
<p>For more information on using the J2SE policy tool, see
<code>http://docs.oracle.com/javase/tutorial/security/tour2/index.html</code>.</p>
</div>
<div class="paragraph">
<p>For more information about the permissions you can set in the
<code>client.policy</code> file, see
<code>http://docs.oracle.com/javase/7/docs/technotes/guides/security/permissions.html</code>.</p>
</div>
<div class="paragraph">
<p><a id="gckgn"></a><a id="GSDVG00469"></a><a id="using-rmiiiop-over-ssl"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_rmi_iiop_over_ssl">Using RMI/IIOP Over SSL</h4>
<div class="paragraph">
<p>You can configure RMI/IIOP over SSL in two ways: using a username and
password, or using a client certificate.</p>
</div>
<div class="paragraph">
<p>To use a username and password, configure the <code>ior-security-config</code>
element in the <code>glassfish-ejb-jar.xml</code> file. The following configuration
establishes SSL between an application client and an EJB component using
a username and password. The user has to login to the ACC using either
the <code>sun-acc.xml</code> mechanism or the
<a href="securing-apps.html#beacm">Programmatic Login Using the
ProgrammaticLogin Class</a> mechanism.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;ior-security-config&gt;
  &lt;transport-config&gt;
    &lt;integrity&gt;required&lt;/integrity&gt;
    &lt;confidentiality&gt;required&lt;/confidentiality&gt;
    &lt;establish-trust-in-target&gt;supported&lt;/establish-trust-in-target&gt;
    &lt;establish-trust-in-client&gt;none&lt;/establish-trust-in-client&gt;
  &lt;/transport-config&gt;
  &lt;as-context&gt;
    &lt;auth-method&gt;username_password&lt;/auth-method&gt;
    &lt;realm&gt;default&lt;/realm&gt;
    &lt;required&gt;true&lt;/required&gt;
  &lt;/as-context&gt;
 &lt;sas-context&gt;
    &lt;caller-propagation&gt;none&lt;/caller-propagation&gt;
 &lt;/sas-context&gt;
&lt;/ior-security-config&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>glassfish-ejb-jar.xml</code> and <code>sun-acc.xml</code>
files, see the <a href="../application-deployment-guide/toc.html#GSDPG">GlassFish Server Open Source Edition
Application Deployment Guide</a>.</p>
</div>
<div class="paragraph">
<p>To use a client certificate, configure the <code>ior-security-config</code> element
in the <code>glassfish-ejb-jar.xml</code> file. The following configuration
establishes SSL between an application client and an EJB component using
a client certificate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;ior-security-config&gt;
  &lt;transport-config&gt;
    &lt;integrity&gt;required&lt;/integrity&gt;
    &lt;confidentiality&gt;required&lt;/confidentiality&gt;
    &lt;establish-trust-in-target&gt;supported&lt;/establish-trust-in-target&gt;
    &lt;establish-trust-in-client&gt;required&lt;/establish-trust-in-client&gt;
  &lt;/transport-config&gt;
  &lt;as-context&gt;
    &lt;auth-method&gt;none&lt;/auth-method&gt;
    &lt;realm&gt;default&lt;/realm&gt;
    &lt;required&gt;false&lt;/required&gt;
  &lt;/as-context&gt;
  &lt;sas-context&gt;
    &lt;caller-propagation&gt;none&lt;/caller-propagation&gt;
  &lt;/sas-context&gt;
&lt;/ior-security-config&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use a client certificate, you must also specify the system properties
for the keystore and truststore to be used in establishing SSL. To use
SSL with the Application Client Container (ACC), you need to set these
system properties in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the new syntax of the <code>appclient</code> script and specify the system
properties as JVM options. See <a href="#beaky">Running an Application Client
Using the <code>appclient</code> Script</a>.</p>
</li>
<li>
<p>Set the environment variable <code>VMARGS</code> in the shell. For example, in
the <code>ksh</code> or <code>bash</code> shell, the command to set this environment variable
would be as follows:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>export VMARGS="-Djavax.net.ssl.keyStore=${keystore.db.file}
-Djavax.net.ssl.trustStore=${truststore.db.file}
-Djavax.net.ssl.keyStorePass word=${ssl.password}
-Djavax.net.ssl.trustStorePassword=${ssl.password}"</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Optionally, you can set the <code>env</code> element using Ant. For example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;target name="runclient"&gt;
  &lt;exec executable="${S1AS_HOME}/bin/appclient"&gt;
    &lt;env key="VMARGS" value=" -Djavax.net.ssl.keyStore=${keystore.db.file}
      -Djavax.net.ssl.trustStore=${truststore.db.file}
      -Djavax.net.ssl.keyStorePasword=${ssl.password}
      -Djavax.net.ssl.trustStorePassword=${ssl.password}"/&gt;
    &lt;arg value="-client"/&gt;
    &lt;arg value="${appClient.jar}"/&gt;
  &lt;/exec&gt;
&lt;/target&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><a id="ghbpc"></a><a id="GSDVG00470"></a><a id="connecting-to-a-remote-ejb-module-through-a-firewall"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_connecting_to_a_remote_ejb_module_through_a_firewall">Connecting to a Remote EJB Module Through a Firewall</h4>
<div class="paragraph">
<p>To deploy and run an application client that connects to an EJB module
on a GlassFish Server instance that is behind a firewall, you must set
ORB Virtual Address Agent Implementation (ORBVAA) options. Use the
<code>asadmin create-jvm-options</code> command as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin create-jvm-options -Dcom.sun.corba.ee.ORBVAAHost=public-IP-adress
asadmin create-jvm-options -Dcom.sun.corba.ee.ORBVAAPort=public-port
asadmin create-jvm-options
-Dcom.sun.corba.ee.ORBUserConfigurators.com.sun.corba.ee.impl.plugin.hwlb.VirtualAddressAgentImpl=x</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set the <code>ORBVAAHost</code> and <code>ORBVAAPort</code> options to the host and port of
the public address. The <code>ORBUserConfigurators</code> option tells the ORB to
create an instance of the <code>VirtualAddressAgentImpl</code> class and invoke the
<code>configure</code> method on the resulting object, which must implement the
com.sun.corba.ee.spi.orb.ORBConfigurator interface. The
<code>ORBUserConfigurators</code> value doesn&#8217;t matter. Together, these options
create an ORB that in turn creates <code>Object</code> references (the underlying
implementation of remote EJB references) containing the public address,
while the ORB listens on the private address specified for the IIOP port
in the GlassFish Server configuration.</p>
</div>
<div class="paragraph">
<p><a id="gipkj"></a><a id="GSDVG00471"></a><a id="specifying-a-splash-screen"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_specifying_a_splash_screen">Specifying a Splash Screen</h4>
<div class="paragraph">
<p>Java SE 6 offers splash screen support, either through a Java
command-line option or a manifest entry in the application&#8217;s JAR file.
To take advantage of this Java SE feature in your application client,
you can do one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create the appclient JAR file so that its manifest contains a
<code>SplashScreen-Image</code> entry that specifies the path to the image in the
client. The <code>java</code> command displays the splash screen before starting
the ACC or your client, just as with any Java application.</p>
</li>
<li>
<p>Use the new <code>appclient ... -jar</code> launch format, using the <code>-splash</code>
command-line option at runtime or the <code>SplashScreen-Image</code> manifest
entry at development time. See <a href="#beaky">Running an Application Client
Using the <code>appclient</code> Script</a>.</p>
</li>
<li>
<p>In the environment that runs the <code>appclient</code> script, set the <code>VMOPTS</code>
environment variable to include the <code>-splash</code> option before invoking the
<code>appclient</code> script to launch the client.</p>
</li>
<li>
<p>Build an application client that uses the embeddable ACC feature and
specify the splash screen image using one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>-splash</code> option of the <code>java</code> command</p>
</li>
<li>
<p><code>SplashScreen-Image</code> in the manifest for your program (not the
manifest for the application client)<br>
See <a href="#gipkt">Using the Embeddable ACC</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>During application (EAR file) deployment, the GlassFish Server generates
façade JAR files, one for the application and one for each application
client in the application. During application client module deployment,
the GlassFish Server generates a single facade JAR for the application
client. The <code>appclient</code> script supports splash screens inside the
application client JAR only if you launch an application client facade
or appclient client JAR. If you launch the facade for an application or
the undeployed application itself, the <code>appclient</code> script cannot take
advantage of the Java SE 6 splash screen feature.</p>
</div>
<div class="paragraph">
<p><a id="gjiec"></a><a id="GSDVG00472"></a><a id="setting-login-retries"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_setting_login_retries">Setting Login Retries</h4>
<div class="paragraph">
<p>You can set a JVM option using the <code>appclient</code> script that determines
the number of login retries allowed. This option is
`-Dorg.glassfish.appclient.acc.maxLoginRetries=`n where n is a positive
integer. The default number of retries is 3.</p>
</div>
<div class="paragraph">
<p>This retry loop happens when the ACC attempts to perform injection if
you annotated the client&#8217;s <code>main</code> class (for example, using
<code>@Resource</code>). If instead of annotations your client uses the
<code>InitialContext</code> explicitly to look up remote resources, the retry loop
does not apply. In this case, you could write logic to catch an
exception around the lookup and retry explicitly.</p>
</div>
<div class="paragraph">
<p>For details about the <code>appclient</code> script syntax, see the
<a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition Reference Manual</a>.</p>
</div>
<div class="paragraph">
<p><a id="gjpjt"></a><a id="GSDVG00473"></a><a id="using-libraries-with-application-clients"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_libraries_with_application_clients">Using Libraries with Application Clients</h4>
<div class="paragraph">
<p>The Libraries field in the Administration Console&#8217;s deployment page and
the <code>--libraries</code> option of the <code>asadmin deploy</code> command do not apply to
application clients. Neither do the as-install`/lib`, domain-dir`/lib`,
and domain-dir`/lib/classes` directories comprising the Common Class
Loader. These apply only to applications and modules deployed to the
server. For more information, see <a href="class-loaders.html#beade">Class
Loaders</a>.</p>
</div>
<div class="paragraph">
<p>To use libraries with an application client, package the application
client in an application (EAR file). Then, either place the libraries in
the <code>/lib</code> directory of the EAR file or specify their location in the
application client JAR file&#8217;s manifest <code>Class-Path</code>.</p>
</div>
<div class="paragraph">
<p><a id="gkusn"></a><a id="GSDVG00161"></a><a id="developing-clients-without-the-acc"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_clients_without_the_acc">Developing Clients Without the ACC</h3>
<div class="paragraph">
<p>This section describes the procedure to create, assemble, and deploy a
Java-based client that is not packaged using the Application Client
Container (ACC).</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gkusp">To access an EJB component from a stand-alone client</a></p>
</li>
<li>
<p><a href="#gkutw">To access an EJB component from a server-side module</a></p>
</li>
<li>
<p><a href="#gkuqa">To access a JMS resource from a stand-alone client</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For information about using the ACC, see <a href="#beakv">Developing Clients
Using the ACC</a>.</p>
</div>
<div class="paragraph">
<p><a id="gkusp"></a><a id="GSDVG00074"></a><a id="to-access-an-ejb-component-from-a-stand-alone-client"></a></p>
</div>
<div class="sect3">
<h4 id="_to_access_an_ejb_component_from_a_stand_alone_client">To access an EJB component from a stand-alone client</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In your client code, instantiate the <code>InitialContext</code>:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>InitialContext ctx = new InitialContext();</pre>
</div>
</div>
<div class="paragraph">
<p>It is not necessary to explicitly instantiate a naming context that
points to the CosNaming service.
2.  In the client code, look up the home object by specifying the JNDI
name of the home object.<br>
Here is an EJB 2.x example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">Object ref = ctx.lookup("jndi-name");
BeanAHome = (BeanAHome)PortableRemoteObject.narrow(ref,BeanAHome.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an EJB 3.x example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">BeanRemoteBusiness bean =(BeanRemoteBusiness) ctx.lookup("com.acme.BeanRemoteBusiness");</code></pre>
</div>
</div>
<div class="paragraph">
<p>If load balancing is enabled as in Step <a href="#CIHJADHD">6</a> and the EJB
components being accessed are in a different cluster, the endpoint list
must be included in the lookup, as follows:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">corbaname:host1:port1,host2:port2,.../NameService#ejb/jndi-name</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about naming and lookups, see
<a href="jndi.html#beans">Accessing the Naming Context</a>.
3.  Deploy the EJB component to be accessed.<br>
For more information on deployment, see "<a href="../application-deployment-guide/overview.html#GSDPG00063">About
Deployment Tools</a>" in GlassFish Server Open Source Edition Application
Deployment Guide.
4.  Copy the as-install`/lib/gf-client.jar` file to the client machine
and include it in the classpath on the client side.<br>
The <code>gf-client.jar</code> file references GlassFish Server JAR files in its
<code>MANIFEST.MF</code> file. If there is no GlassFish Server installation on the
client machine, you must also copy the as-install`/modules` directory to
the client machine and maintain its directory structure relative to the
as-install`/lib/gf-client.jar` file. Or you can use the
<code>package-appclient</code> script; see <a href="#beakz">Using the
<code>package-appclient</code> Script</a>.
5.  To access EJB components that are residing in a remote system, set
the following system properties for the Java Virtual Machine startup
options:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">-Dorg.omg.CORBA.ORBInitialHost=${ORBhost}
-Dorg.omg.CORBA.ORBInitialPort=${ORBport}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here ORBhost is the GlassFish Server hostname and ORBport is the ORB
port number (default is <code>3700</code> for the default server instance, named
<code>server</code>).<br>
You can use the <code>asadmin get</code> command to get the IIOP port numbers. For
example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin get "configs.config.server-config.iiop-service.iiop-listener.orb-listener-1.*"</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="CIHJADHD"></a><br>
To set up load balancing and remote EJB reference failover, define the
<code>endpoints</code> property as follows:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>-Dcom.sun.appserv.iiop.endpoints=host1:port1,host2:port2,...</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>endpoints</code> property specifies a comma-separated list of one or more
IIOP endpoints used for load balancing. An IIOP endpoint is in the form
host`:<code>port, where the host is an IPv4 address or host name, and the
port specifies the port number. +
If the `endpoints</code> list is changed dynamically in the code, the new list
is used only if a new <code>InitialContext</code> is created.
7.  Make sure the <code>etc/hosts</code> file on the client machine maps the
GlassFish Server hostname and external IP address.
8.  Run the stand-alone client.<br>
As long as the client environment is set appropriately and the JVM is
compatible, you merely need to run the <code>main</code> class.</p>
</div>
<div class="paragraph">
<p><a id="gkutw"></a><a id="GSDVG00075"></a><a id="to-access-an-ejb-component-from-a-server-side-module"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_access_an_ejb_component_from_a_server_side_module">To access an EJB component from a server-side module</h4>
<div class="paragraph">
<p>A server-side module can be a servlet, another EJB component, or another
type of module.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="CIHFIJDC"></a><br>
In your module code, instantiate the <code>InitialContext</code>:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>InitialContext ctx = new InitialContext();</pre>
</div>
</div>
<div class="paragraph">
<p>It is not necessary to explicitly instantiate a naming context that
points to the CosNaming service.<br>
To set up load balancing and remote EJB reference failover, define the
<code>endpoints</code> property as follows:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">Hashtable env = new Hashtable();
env.put("com.sun.appserv.iiop.endpoints","host1:port1,host2:port2,...");
InitialContext ctx = new InitialConext(env);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>endpoints</code> property specifies a comma-separated list of one or more
IIOP endpoints used for load balancing. An IIOP endpoint is in the form
host`:<code>port, where the host is an IPv4 address or host name, and the
port specifies the port number. +
You can use the `asadmin get</code> command to get the IIOP port numbers. For
example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin get "configs.config.server-config.iiop-service.iiop-listener.orb-listener-1.*"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>endpoints</code> list is changed dynamically in the code, the new list
is used only if a new <code>InitialContext</code> is created.
2.  In the module code, look up the home object by specifying the JNDI
name of the home object.<br>
Here is an EJB 2.x example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">Object ref = ctx.lookup("jndi-name");
BeanAHome = (BeanAHome)PortableRemoteObject.narrow(ref,BeanAHome.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an EJB 3.x example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">BeanRemoteBusiness bean =(BeanRemoteBusiness) ctx.lookup("com.acme.BeanRemoteBusiness");</code></pre>
</div>
</div>
<div class="paragraph">
<p>If load balancing is enabled as in Step <a href="#CIHFIJDC">1</a> and the EJB
components being accessed are in a different cluster, the endpoint list
must be included in the lookup, as follows:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">corbaname:host1:port1,host2:port2,.../NameService#ejb/jndi-name</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about naming and lookups, see
<a href="jndi.html#beans">Accessing the Naming Context</a>.
3.  Deploy the EJB component to be accessed.<br>
For more information on deployment, see "<a href="../application-deployment-guide/overview.html#GSDPG00063">About
Deployment Tools</a>" in GlassFish Server Open Source Edition Application
Deployment Guide.
4.  To access EJB components that are residing in a remote system, set
the following system properties for the Java Virtual Machine startup
options:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">-Dorg.omg.CORBA.ORBInitialHost=${ORBhost}
-Dorg.omg.CORBA.ORBInitialPort=${ORBport}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here ORBhost is the Application Server hostname and ORBport is the ORB
port number (default is <code>3700</code> for the default server instance, named
<code>server</code>).
5.  Deploy the module.<br>
For more information on deployment, see "<a href="../application-deployment-guide/overview.html#GSDPG00063">About
Deployment Tools</a>" in GlassFish Server Open Source Edition Application
Deployment Guide.</p>
</div>
<div class="paragraph">
<p><a id="gkuqa"></a><a id="GSDVG00076"></a><a id="to-access-a-jms-resource-from-a-stand-alone-client"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_access_a_jms_resource_from_a_stand_alone_client">To access a JMS resource from a stand-alone client</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a JMS client.<br>
For detailed instructions on developing a JMS client, see
"https://javaee.github.io/tutorial/jms-examples.html[Java Message
Service Examples]" in The Java EE 8 Tutorial.</p>
</li>
<li>
<p>Configure a JMS resource on GlassFish Server.<br>
For information on configuring JMS resources, see
"<a href="../administration-guide/jms.html#GSADG00598">Administering JMS Connection Factories and
Destinations</a>" in GlassFish Server Open Source Edition Administration
Guide.</p>
</li>
<li>
<p>Copy the following JAR files to the client machine and include them
in the classpath on the client side:</p>
<div class="ulist">
<ul>
<li>
<p><code>gf-client.jar</code> - available at as-install`/lib`</p>
</li>
<li>
<p><code>imqjmsra.jar</code> - available at
as-install`/lib/install/aplications/jmsra`<br>
The <code>gf-client.jar</code> file references GlassFish Server JAR files in its
<code>MANIFEST.MF</code> file. If there is no GlassFish Server installation on the
client machine, you must also copy the as-install`/modules` directory to
the client machine and maintain its directory structure relative to the
as-install`/lib/gf-client.jar` file. Or you can use the
<code>package-appclient</code> script; see <a href="#beakz">Using the
<code>package-appclient</code> Script</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>To access EJB components that are residing in a remote system, set
the following system properties for the Java Virtual Machine startup
options:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>-Dorg.omg.CORBA.ORBInitialHost=${ORBhost}
-Dorg.omg.CORBA.ORBInitialPort=${ORBport}</pre>
</div>
</div>
<div class="paragraph">
<p>Here ORBhost is the Application Server hostname and ORBport is the ORB
port number (default is <code>3700</code> for the default server instance, named
<code>server</code>).<br>
You can use the <code>asadmin get</code> command to get the IIOP port numbers. For
example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin get "configs.config.server-config.iiop-service.iiop-listener.orb-listener-1.*"</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the stand-alone client.<br>
As long as the client environment is set appropriately and the JVM is
compatible, you merely need to run the <code>main</code> class.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>

<hr />

<table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>		
		<td align="left">
		<a href="container_managed-persistence.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="connectors.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>

<span id="copyright">
        <img src="/img/eclipse_foundation_logo_tiny.png" height="20px" alt="Eclipse Foundation Logo" align="top"/>&nbsp;            
        <span >Copyright&nbsp;&copy;&nbsp;2019,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</span>
</span>
</body>
</html>