
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Upgrading an Installation of Application Server or GlassFish Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
<table id="doc-title" cellspacing="0" cellpadding="0">
  <tr>
  <td align="left" valign="top">
  <b>Upgrading an Installation of Application Server or GlassFish Server</b><br />
  </td>
  </tr>
</table>
<hr />

<table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>
		<td align="left">
		<a href="upgrade-compatibility-issues.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>


		<td align="right">
		<a href="toc.html">
			<span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a id="GSUPG00003"></a><a id="abmbq"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading-an-installation-of-application-server-or-glassfish-server">2 Upgrading an Installation of Application Server or GlassFish Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Upgrade Tool that is bundled with GlassFish Server 4.0 replicates
the configuration of a previously installed server in the target
installation. The Upgrade Tool assists in upgrading the configuration
and applications from an earlier version of the Application Server or
GlassFish Server to GlassFish Server 4.0.</p>
</div>
<div class="paragraph">
<p>In addition to Upgrade Tool, there are three Update Center tools that
can be used to perform an in-place upgrade to GlassFish Server 4.0 from
GlassFish Server 3.1.1, 3.1, 3.0.1, and Enterprise Server v3. These
three Update Center tools are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update Tool</p>
</li>
<li>
<p>Software Update Notifier</p>
</li>
<li>
<p>The <code>pkg</code> command-line utility</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upgrade Tool and the three Update Center tools are explained later in
this chapter.</p>
</div>
<div class="paragraph">
<p>To view a list of the older versions from which you can upgrade, see
<a href="#gjxkx">Supported Releases for Upgrade to GlassFish Server 4.0</a>.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gaejc">Upgrade Overview</a></p>
</li>
<li>
<p><a href="#abmbr">Performing a Side-By-Side Upgrade With Upgrade Tool</a></p>
</li>
<li>
<p><a href="#gkthu">Performing an In-Place Upgrade With the Update Center
Tools</a></p>
</li>
<li>
<p><a href="#gktnh">Upgrading Installations That Use NSS Cryptographic Tokens</a></p>
</li>
<li>
<p><a href="#gfybw">Upgrading Clusters and Node Agent Configurations</a></p>
</li>
<li>
<p><a href="#gkrfh">Correcting Potential Upgrade Problems</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gaejc"></a><a id="GSUPG00039"></a><a id="upgrade-overview"></a></p>
</div>
<div class="sect2">
<h3 id="_upgrade_overview">Upgrade Overview</h3>
<div class="paragraph">
<p>The subsections that follow provide information that you will need when
you perform an upgrade.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gkxum">Upgrade Paths</a></p>
</li>
<li>
<p><a href="#gdkiw">Upgrade Terminology</a></p>
</li>
<li>
<p><a href="#gktcb">Summary of Upgrade Tools and Procedures</a></p>
</li>
<li>
<p><a href="#gjxkx">Supported Releases for Upgrade to GlassFish Server 4.0</a></p>
</li>
<li>
<p><a href="#gkufi">Upgrading From Version 8.x or Older Product Releases</a></p>
</li>
<li>
<p><a href="#gkxrp">Upgrading GlassFish Server Inside a Closed Network</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkxum"></a><a id="GSUPG00059"></a><a id="upgrade-paths"></a></p>
</div>
<div class="sect3">
<h4 id="_upgrade_paths">Upgrade Paths</h4>
<div class="paragraph">
<p>There are two general paths you can use when upgrading to GlassFish
Server 4.0:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Side-by-Side</dt>
<dd>
<p>A side-by-side upgrade means that the new GlassFish Server release is
installed in a different directory than the release from which you are
upgrading.<br>
In this scenario, you perform the following steps:<br></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Perform a basic installation of GlassFish Server 4.0 in a location
other than the one being used for the older product.</p>
</li>
<li>
<p>Use Upgrade Tool to migrate the old configurations and
applications to the new GlassFish Server 4.0 directories.</p>
</li>
<li>
<p>Test the new GlassFish Server installation to make sure everything
is working properly.</p>
</li>
<li>
<p>When you are satisfied that the new installation works properly,
modify your production environment to use the new installation.<br>
The side-by-side upgrade path is typically used for live production
environments because it allows you to thoroughly test the new
GlassFish Server installation before bringing it into production.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">In-Place</dt>
<dd>
<p>An in-place upgrade means that the new GlassFish Server release is
installed directly over and into the same directory as the previous
product release. The existing configuration is reused in the updated
installation.<br>
In this scenario, you simply use Update Tool, the <code>pkg</code> utility, or
the Update Notifier in your old installation to overwrite the old
installation with the new GlassFish Server 4.0 product.<br>
Performing an in-place upgrade is easier than performing a
side-by-side upgrade, but you lose the ability to switch back and
forth between the old and new installations. There is also no way to
revert an in-place upgrade back to the previous product version.
Because of these limitations, in-place upgrades are typically only
used by developers and for non-production GlassFish Server
deployments.<br>
Note also that it is only possible to perform an in-place upgrade when
upgrading from GlassFish Server 3.1.1, 3.1, 3.0.1, or v3. If you are
upgrading from product versions prior to 3x, you must perform a
side-by-side upgrade.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For a more detailed overview, see <a href="#gktcb">Summary of Upgrade Tools
and Procedures</a>.</p>
</div>
<div class="paragraph">
<p><a id="gdkiw"></a><a id="GSUPG00060"></a><a id="upgrade-terminology"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_upgrade_terminology">Upgrade Terminology</h4>
<div class="paragraph">
<p>The following are important terms related to the upgrade process.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Source Domain Directory</dt>
<dd>
<p>The directory of the server domain from which you are upgrading to the
new version (for example, <code>c:\glassfish\domains\domain1</code>).</p>
</dd>
<dt class="hdlist1">Target Root Domain&#8217;s Directory</dt>
<dd>
<p>The directory where domains are created on the server to which you are
upgrading (for example, <code>c:\glassfish3\glassfish\domains</code>).</p>
</dd>
<dt class="hdlist1">Master Password</dt>
<dd>
<p>The SSL certificate database password used in operations such as
GlassFish Server startup. This term refers to the master password of
the installation from which you want to upgrade. You need to specify
this password if you have changed it from the default value of
<code>changeit</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a id="gktcb"></a><a id="GSUPG00061"></a><a id="summary-of-upgrade-tools-and-procedures"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_summary_of_upgrade_tools_and_procedures">Summary of Upgrade Tools and Procedures</h4>
<div class="paragraph">
<p>There are several tools you can use to upgrade from an earlier GlassFish
Server or Enterprise Server installation to GlassFish Server 4.0. The
general procedures for upgrading to GlassFish Server 4.0 vary depending
on which tool you use and the product version from which you are
upgrading.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gktdx">Summary of Tools for Performing an Upgrade</a></p>
</li>
<li>
<p><a href="#gktdz">Summary of Procedure for Upgrading With Upgrade Tool</a></p>
</li>
<li>
<p><a href="#gktcl">Summary of Procedure for Upgrading With Update Tool</a></p>
</li>
<li>
<p><a href="#gkuef">Summary of Procedure for Upgrading With the Software
Update Notifier</a></p>
</li>
<li>
<p><a href="#gktnb">Summary of Procedure for Upgrading With the <code>pkg</code> Utility</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktdx"></a><a id="GSUPG00045"></a><a id="summary-of-tools-for-performing-an-upgrade"></a></p>
</div>
<div class="sect4">
<h5 id="_summary_of_tools_for_performing_an_upgrade">Summary of Tools for Performing an Upgrade</h5>
<div class="paragraph">
<p>There are several tools you can use to perform an upgrade to GlassFish
Server 4.0 are described below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gktcz">Upgrade Tool</a></p>
</li>
<li>
<p><a href="#gktha">Update Tool and the <code>pkg</code> Utility</a></p>
</li>
<li>
<p><a href="#gkuff">Software Update Notifier</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktcz"></a><a id="GSUPG00004"></a><a id="upgrade-tool"></a></p>
</div>
<div class="paragraph">
<p>Upgrade Tool</p>
</div>
<div class="paragraph">
<p>The GlassFish Server Upgrade Tool is tended solely for performing
side-by-side upgrades from any compatible older product version to
GlassFish Server 4.0.</p>
</div>
<div class="paragraph">
<p>Upgrade Tool provides a number of features that aid in the migration of
older configurations and applications to a new GlassFish Server 4.0
installation. These features are described in more detail in
<a href="#gdkix">Upgrade Tool Functionality</a>.</p>
</div>
<div class="paragraph">
<p>In GlassFish Server 4.0 Upgrade Tool is installed in the
as-install`/bin` directory.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>Upgrade Tool is the only tool you can use when upgrading to GlassFish
Server 4.0 from product versions prior to GlassFish Server 3.0.1 or
Enterprise Server v3.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See <a href="#gktdz">Summary of Procedure for Upgrading With Upgrade Tool</a>
for an overview of the general procedure for performing an upgrade with
Upgrade Tool.</p>
</div>
<div class="paragraph">
<p><a id="gktha"></a><a id="GSUPG00005"></a><a id="update-tool-and-the-pkg-utility"></a></p>
</div>
<div class="paragraph">
<p>Update Tool and the <code>pkg</code> Utility</p>
</div>
<div class="paragraph">
<p>The GlassFish Server Update Tool is a graphical utility that is
typically used for the day-to-day maintenance of GlassFish Server
components and additional features. For example, Update Tool can be used
to update GlassFish Server components or install additional features
such as OSGi Admin Console.</p>
</div>
<div class="paragraph">
<p>The command-line counterpart to Update Tool is the <code>pkg</code> utility. While
the <code>pkg</code> utility does not provide exactly the same set of features as
Update Tool, for the purposes of upgrading to GlassFish Server 4.0, the
<code>pkg</code> utility and Update Tool feature sets are almost identical.</p>
</div>
<div class="paragraph">
<p>In addition to day-to-day maintenance tasks, Update Tool and the <code>pkg</code>
utility can be used to perform an in-place upgrade of an entire
GlassFish Server 3.0.1 or Enterprise Server v3 installation to the
GlassFish Server 4.0 or later release.</p>
</div>
<div class="paragraph">
<p>In GlassFish Server 4.0 Update Tool is installed in the
as-install-parent`/bin` directory.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>It is not possible to use Update Tool to upgrade from GlassFish Server
or Enterprise Server versions prior to 3x. For these older versions, you
must use the Upgrade Tool, described in <a href="#gktcz">Upgrade Tool</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See <a href="#gktcl">Summary of Procedure for Upgrading With Update Tool</a> for
an overview of the general procedure for performing an upgrade with
Update Tool. For more information about Update Tool in general, see
"<a href="../administration-guide/toc.html#GSADG00701">Update Tool</a>" in GlassFish Server Open Source Edition
Administration Guide.</p>
</div>
<div class="paragraph">
<p><a id="gkuff"></a><a id="GSUPG00006"></a><a id="software-update-notifier"></a></p>
</div>
<div class="paragraph">
<p>Software Update Notifier</p>
</div>
<div class="paragraph">
<p>The GlassFish Server Software Update Notifier is similar to Update Tool
and the <code>pkg</code> utility in that it enables you to perform an in-place
upgrade from GlassFish Server 3.1.1, 3.1, 3.0.1, or Enterprise Server
v3. As with Update Tool and the <code>pkg</code> utility, you cannot use the
Software Update tool to upgrade from product releases prior 3.0.1 and
v3.</p>
</div>
<div class="paragraph">
<p>The Software Update Notifier is distributed as a configuration option
during GlassFish Server 4.0, 3.0.1, and Enterprise Server v3
installation. If installed and enabled, the Software Update Notifier
monitors your installation and pops up a notification balloon when
updates or upgrades are available for your product.</p>
</div>
<div class="paragraph">
<p>See <a href="#gkuef">Summary of Procedure for Upgrading With the Software
Update Notifier</a> for an overview of the general procedure for performing
an upgrade with the Software Update Notifier. For more information about
the Update Notifier, refer to the Update Tool online help.</p>
</div>
<div class="paragraph">
<p><a id="gktdz"></a><a id="GSUPG00046"></a><a id="summary-of-procedure-for-upgrading-with-upgrade-tool"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_summary_of_procedure_for_upgrading_with_upgrade_tool">Summary of Procedure for Upgrading With Upgrade Tool</h5>
<div class="paragraph">
<p>The general procedure for using Upgrade Tool to perform an upgrade to
GlassFish Server 4.0 from any compatible older version of GlassFish
Server or Enterprise Server comprises the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download GlassFish Server 4.0 and perform a Standard Installation,
as described in "<a href="../installation-guide/toc.html#GSING00007">To Install GlassFish Server Using the
Self-Extracting File</a>" in GlassFish Server Open Source Edition
Installation Guide.</p>
</li>
<li>
<p>Copy any custom or third-party libraries from the older installation
to their corresponding locations in the new GlassFish Server 4.0
installation directories. Note that you should only copy custom or
third-party libraries here. Do not copy an libraries from the actual
domain that will be upgraded.</p>
</li>
<li>
<p>Run the <code>asupgrade</code> command from the new GlassFish Server 4.0
as-install`/bin` directory.</p>
</li>
<li>
<p>Start the new GlassFish Server 4.0 DAS with the
<code>asadmin start-domain</code> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This procedure is described in more detail in <a href="#abmbr">Performing a
Side-By-Side Upgrade With Upgrade Tool</a>.</p>
</div>
<div class="paragraph">
<p><a id="gktcl"></a><a id="GSUPG00047"></a><a id="summary-of-procedure-for-upgrading-with-update-tool"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_summary_of_procedure_for_upgrading_with_update_tool">Summary of Procedure for Upgrading With Update Tool</h5>
<div class="paragraph">
<p>The general procedure for using Update Tool to perform an upgrade to
GlassFish Server 4.0 from GlassFish Server 3.0.1 or Enterprise Server v3
comprises the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Manually stop all server instances and the domain.</p>
</li>
<li>
<p>Launch Update Tool by using the as-install-parent`/bin/updatetool`
command in the older product directory.</p>
</li>
<li>
<p>In Update Tool, select and install the latest GlassFish Server
product release. This updates your server to the 4.0 release.</p>
</li>
<li>
<p>Upgrade the domain by running the <code>asadmin start-domain --upgrade</code>
subcommand. This performs the upgrade and then shuts down the DAS.</p>
</li>
<li>
<p>Restart the DAS normally with the with the <code>asadmin start-domain</code>
subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This procedure is described in more detail in <a href="#gktjf">To Upgrade
Using the Update Tool GUI</a>.</p>
</div>
<div class="paragraph">
<p><a id="gkuef"></a><a id="GSUPG00048"></a><a id="summary-of-procedure-for-upgrading-with-the-software-update-notifier"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_summary_of_procedure_for_upgrading_with_the_software_update_notifier">Summary of Procedure for Upgrading With the Software Update Notifier</h5>
<div class="paragraph">
<p>The general procedure for using the Software Update Notifier to perform
an upgrade to GlassFish Server 4.0 from GlassFish Server3.0.1 or
Enterprise Server v3 comprises the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Wait for the Software Update Notifier to pop up a notification
balloon informing you that updates are available.</p>
</li>
<li>
<p>Click the balloon prompt to launch the Software Update GUI.</p>
</li>
<li>
<p>Manually stop all server instances and the domain.</p>
</li>
<li>
<p>Use the Software Update GUI to perform the upgrade. This updates
your server to the 4.0 release.</p>
</li>
<li>
<p>Upgrade the domain by running the <code>asadmin start-domain --upgrade</code>
subcommand. This performs the upgrade and then shuts down the DAS.</p>
</li>
<li>
<p>Restart the upgraded DAS normally with the with the
<code>asadmin start-domain</code> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This procedure is described in more detail in <a href="#gkuhu">To Upgrade
Using the Software Update Notifier</a>.</p>
</div>
<div class="paragraph">
<p><a id="gktnb"></a><a id="GSUPG00049"></a><a id="summary-of-procedure-for-upgrading-with-the-pkg-utility"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_summary_of_procedure_for_upgrading_with_the_code_pkg_code_utility">Summary of Procedure for Upgrading With the <code>pkg</code> Utility</h5>
<div class="paragraph">
<p>The general procedure for using the <code>pkg</code> utility to perform an upgrade
to GlassFish Server 4.0 from GlassFish Server3.0.1 or Enterprise Server
v3 comprises the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Manually stop all server instances and the domain.</p>
</li>
<li>
<p>Run the as-install-parent`/bin/pkg` command with the desired options
in the older product directory. This updates your server to the 4.0
release.</p>
</li>
<li>
<p>Upgrade the domain by running the <code>asadmin start-domain --upgrade</code>
subcommand. This performs the upgrade and then shuts down the DAS.</p>
</li>
<li>
<p>Restart the upgraded DAS normally with the with the
<code>asadmin start-domain</code> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This procedure is described in more detail in <a href="#gktks">To Upgrade
From the Command Line Using the <code>pkg</code> Utility</a>.</p>
</div>
<div class="paragraph">
<p><a id="gjxkx"></a><a id="GSUPG00062"></a><a id="supported-releases-for-upgrade-to-glassfish-server-4.0"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_supported_releases_for_upgrade_to_glassfish_server_4_0">Supported Releases for Upgrade to GlassFish Server 4.0</h4>
<div class="paragraph">
<p>Upgrades to GlassFish Server 4.0 are supported from the following
earlier GlassFish Server product releases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sun GlassFish Enterprise Server v2.1.1</p>
</li>
<li>
<p>Sun GlassFish Enterprise Server v3</p>
</li>
<li>
<p>GlassFish Server Open Source Edition 3.0.1</p>
</li>
<li>
<p>GlassFish Server Open Source Edition 3.1</p>
</li>
<li>
<p>GlassFish Server Open Source Edition 3.1.1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkufi"></a><a id="GSUPG00063"></a><a id="upgrading-from-version-8.x-or-older-product-releases"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_upgrading_from_version_8_x_or_older_product_releases">Upgrading From Version 8.x or Older Product Releases</h4>
<div class="paragraph">
<p>It is not possible to upgrade to GlassFish Server 4.0 directly from Sun
GlassFish Enterprise Server 8.x or older product releases.</p>
</div>
<div class="paragraph">
<p>To upgrade from a product release that is older than any of those listed
in <a href="#gjxkx">Supported Releases for Upgrade to GlassFish Server 4.0</a>,
you must first upgrade your older product release to one of the releases
that are supported for upgrade to GlassFish Server 4.0.</p>
</div>
<div class="paragraph">
<p>For example, to upgrade from any Enterprise Server 8.x release, you
first need to upgrade that older release to Enterprise Server 2.1.1.
That is, your upgrade path would be as follows:</p>
</div>
<div class="paragraph">
<p>Enterprise Server 8.x⇒Enterprise Server 2.1.1⇒GlassFish Server 4.0</p>
</div>
<div class="paragraph">
<p>Sun GlassFish Enterprise Server 2.1.1 is available for download from the
<a href="http://glassfish.java.net/public/downloadsindex.html">GlassFish Community
Downloads</a> (<code>http://glassfish.java.net/public/downloadsindex.html</code>)
page. Instructions for upgrading to Enterprise Server 2.1.1 are provided
in <a href="http://download.oracle.com/docs/cd/E19879-01/821-0180/index.html">Sun
GlassFish Enterprise Server 2.1.1 Upgrade Guide</a>
(<code>http://docs.oracle.com/cd/E19879-01/821-0180/index.html</code>).</p>
</div>
<div class="paragraph">
<p>After upgrading your older Enterprise Server installation to Enterprise
Server 2.1.1, you can proceed normally with the instructions in this
guide to complete the upgrade to GlassFish Server 4.0.</p>
</div>
<div class="paragraph">
<p><a id="gkxrp"></a><a id="GSUPG00065"></a><a id="upgrading-glassfish-server-inside-a-closed-network"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_upgrading_glassfish_server_inside_a_closed_network">Upgrading GlassFish Server Inside a Closed Network</h4>
<div class="paragraph">
<p>For instructions on upgrading a GlassFish Server installation in an
environment where Internet access is not available, see
"<a href="../administration-guide/toc.html#GSADG00575">Extending and Updating GlassFish Server Inside a
Closed Network</a>" in GlassFish Server Open Source Edition Administration
Guide.</p>
</div>
<div class="paragraph">
<p><a id="abmbr"></a><a id="GSUPG00040"></a><a id="performing-a-side-by-side-upgrade-with-upgrade-tool"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performing_a_side_by_side_upgrade_with_upgrade_tool">Performing a Side-By-Side Upgrade With Upgrade Tool</h3>
<div class="paragraph">
<p>This section explains how to use Upgrade Tool to perform a side-by-side
upgrade to GlassFish Server 4.0 from any compatible older product
release.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gktgx">Upgrade Tool Summary</a></p>
</li>
<li>
<p><a href="#gdkix">Upgrade Tool Functionality</a></p>
</li>
<li>
<p><a href="#gktjn">To Upgrade From the Command Line Using Upgrade Tool</a></p>
</li>
<li>
<p><a href="#gaejn">To Upgrade Using the Upgrade Tool Wizard</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktgx"></a><a id="GSUPG00066"></a><a id="upgrade-tool-summary"></a></p>
</div>
<div class="sect3">
<h4 id="_upgrade_tool_summary">Upgrade Tool Summary</h4>
<div class="paragraph">
<p>The Upgrade Tool upgrades your domain configurations and deployed
applications. When you use the Upgrade Tool, the source server and the
target server are normally installed on the same machine, but under
different install locations. Both server file systems must be accessible
from the system on which you perform the upgrade.</p>
</div>
<div class="paragraph">
<p>To perform the upgrade, the user who runs the upgrade needs to have read
permissions for the source and target directories and write permission
for the target directory.</p>
</div>
<div class="paragraph">
<p>You can perform an upgrade using Upgrade Tool in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gktjn">To Upgrade From the Command Line Using Upgrade Tool</a></p>
</li>
<li>
<p><a href="#gaejn">To Upgrade Using the Upgrade Tool Wizard</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gdkix"></a><a id="GSUPG00067"></a><a id="upgrade-tool-functionality"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_upgrade_tool_functionality">Upgrade Tool Functionality</h4>
<div class="paragraph">
<p>The Upgrade Tool migrates the configurations and deployed applications
from an earlier version of Sun Java System Application Server or Sun
GlassFishEnterprise Server to the current version. Database migrations
or conversions are not part of this upgrade process.</p>
</div>
<div class="paragraph">
<p>Briefly, the Upgrade Tool performs the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copies the older source domain directory to the new target <code>domains</code>
directory.</p>
</li>
<li>
<p>Calls the <code>asadmin start-domain --upgrade</code> command to migrate the
source configurations to the new target GlassFish Server installation.</p>
</li>
<li>
<p>Sends all <code>asadmin</code> command output to the screen and to the
<code>upgrade.log</code> file, and sends all server output to the <code>server.log</code>
file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additional Upgrade Tool functions are explained in the following
sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gebrv">Migration of Deployed Applications</a></p>
</li>
<li>
<p><a href="#gebqm">Upgrade of Clusters</a></p>
</li>
<li>
<p><a href="#gebvn">Upgrade Verification</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gebrv"></a><a id="GSUPG00050"></a><a id="migration-of-deployed-applications"></a></p>
</div>
<div class="sect4">
<h5 id="_migration_of_deployed_applications">Migration of Deployed Applications</h5>
<div class="paragraph">
<p>Application archives (EAR files) and component archives (JAR, WAR, and
RAR files) that are deployed in the source server do not require any
modification to run on GlassFish Server Open Source Edition 4.0.
Components that may have incompatibilities are deployed on GlassFish
Server 4.0 with the <code>compatibility</code> property set to <code>v2</code> and will run
without change on GlassFish Server 4.0. You may, however, want to
consider modifying the applications to conform to Java EE 6
requirements.</p>
</div>
<div class="paragraph">
<p>The Java EE 6 platform specification imposes stricter requirements than
Java EE 5 did on which JAR files can be visible to various modules
within an EAR file. In particular, application clients must not have
access to EJB JAR files or other JAR files in the EAR file unless they
use a <code>Class-Path</code> header in the manifest file, or unless references use
the standard Java SE mechanisms (extensions, for example), or use the
Java EE <code>library-directory</code> mechanism. Setting the <code>library-directory</code>
property to <code>v2</code> removes these Java EE 6 restrictions.</p>
</div>
<div class="paragraph">
<p>Applications and components that are deployed in the source server are
deployed on the target server during the upgrade. Applications that do
not deploy successfully on the target server must be deployed manually
on the target server by the user.</p>
</div>
<div class="paragraph">
<p>If a domain contains information about a deployed application and the
installed application components do not agree with the configuration
information, the configuration is migrated unchanged, without any
attempt to reconfigure the incorrect configurations.</p>
</div>
<div class="paragraph">
<p><a id="gebqm"></a><a id="GSUPG00051"></a><a id="upgrade-of-clusters"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_upgrade_of_clusters">Upgrade of Clusters</h5>
<div class="paragraph">
<p>When upgrading from a clustered configuration, the older cluster
information is retained in a new <code>domain.xml</code> file in the GlassFish
Server 4.0 installation directories. However, it is still necessary to
manually re-create the server instances that are contained in the
clusters. This procedure is explained in <a href="#gfybw">Upgrading Clusters
and Node Agent Configurations</a>.</p>
</div>
<div class="paragraph">
<p><a id="gebvn"></a><a id="GSUPG00052"></a><a id="upgrade-verification"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_upgrade_verification">Upgrade Verification</h5>
<div class="paragraph">
<p>An upgrade log records the upgrade activity. The upgrade log file is
named <code>upgrade.log</code> and is created in the working directory from which
the Upgrade Tool is run. Additional information is recorded in the
server log of the upgraded domain.</p>
</div>
<div class="paragraph">
<p>You can also use the <code>asadmin version</code> subcommand after starting the
upgraded domain to verify the new GlassFish Server product version; for
example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; version
Version = Oracle GlassFish Server 3.1 (build 42)
Command version executed successfully.</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="gktjn"></a><a id="GSUPG00010"></a><a id="to-upgrade-from-the-command-line-using-upgrade-tool"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_to_upgrade_from_the_command_line_using_upgrade_tool">To Upgrade From the Command Line Using Upgrade Tool</h4>
<div class="paragraph">
<p>This procedure explains how to use the Upgrade Tool command line to
upgrade to GlassFish Server 4.0 from any supported older product
release. See <a href="#gjxkx">Supported Releases for Upgrade to GlassFish
Server 4.0</a> for a list of supported releases.</p>
</div>
<div id="sthref29" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Ensure that the domains on the source server from which you are
upgrading are stopped before proceeding.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install GlassFish Server 4.0 using the Typical
Installation path.<br>
See "<a href="../installation-guide/toc.html#GSING00025">Installing GlassFish Server From a Self-Extracting
Bundle</a>" in GlassFish Server Open Source Edition Installation Guide for
instructions.</p>
</li>
<li>
<p>Copy any custom or third-party libraries that may be located in the
source as-install`/lib` directory to the target as-install`/lib`
directory.<br>
Custom and third-party libraries should normally be located in the
domain-dir`/lib` directory. This step is only necessary for custom or
third-party libraries that may be located in the nonstandard
as-install`/lib` directory.</p>
</li>
<li>
<p>Start Upgrade Tool from a command shell for your operating
environment.<br></p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>Use the Upgrade Tool that is located in the target GlassFish Server 4.0
installation, not the older source installation.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>On UNIX systems<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>as-install/bin/asupgrade -c</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>On Windows systems<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>as-install\bin\asupgrade.bat -c</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-c</code> option starts Upgrade Tool in console mode. If <code>-c</code> is omitted,
Upgrade Tool starts in GUI mode, which is described in <a href="#gaejn">To
Upgrade Using the Upgrade Tool Wizard</a>.<br>
If you start Upgrade Tool with only the <code>-c</code> option, the tool enters
interactive CLI mode in which you are asked to supply the needed
options. If you prefer to enter all options directly from the command
line, you can use the following syntax:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asupgrade
[-c|--console]
[-V|--version]
[-h|--help]
[-s|--source source-domain-directory]
[-t|--target target-domain-directory]
[-f|--passwordfile password-file]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explanations of these options are provided at the end of this procedure.
4.  Follow the prompts to perform the upgrade.<br>
If a name used for an older domain that you are upgrading already exists
in the new target domains directory, Upgrade Tool will ask if you want
to rename the new directory so the old directory can be copied to the
new installation.
* If you type <code>y</code> in response, the directory is renamed
domain-name`.original`. If that name already exists, the directory will
be renamed domain-name`.orginal.0`. For example, if the old domain
directory is named <code>domain1</code>, it will be renamed <code>domain1.original</code>, or
if that name already exists, <code>domain1.original.0</code>.
* If you type <code>n</code>, you are prompted to specify a different directory
name or quit.<br>
The domain is upgraded and the results are output to the console.
5.  Review the console output to verify that the upgrade proceeded
correctly.<br>
This output is also written to the <code>output.log</code> file for later review.<br>
If there are any <code>SEVERE</code> or <code>WARNING</code> messages in the <code>server.log</code>
file, the upgrade output will say
<code>"Possible error encountered during upgrade. See server log after upgrade process completes."</code>
6.  Start the upgraded GlassFish Server 4.0 domain.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin start-domain domain-name</code></pre>
</div>
</div>
<div class="paragraph">
<p>Log in to the Administration Console with the user name and password you
used in the older server.<br></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>GlassFish Server 4.0 does not support NSS authentication. If you are
upgrading from a Enterprise Profile configuration that uses NSS
authentication, follow the procedure in <a href="#gktnh">Upgrading
Installations That Use NSS Cryptographic Tokens</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you are upgrading a clustered configuration or a configuration in
which node agents were used, proceed with the instructions in
<a href="#gfybw">Upgrading Clusters and Node Agent Configurations</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSUPG00007"></a><a id="gktiu"></a></p>
</div>
<div class="paragraph">
<p>Example 2-1 Using the <code>asupgrade</code> Command Line</p>
</div>
<div class="paragraph">
<p>The following example shows how to use the <code>asupgrade</code> command-line
utility in non-interactive mode to upgrade an existing Sun GlassFish
Enterprise Server v2.1 installation to GlassFish Server 4.0. The
following command should be entered on a single line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asupgrade -c -s /home/glassfish/domains/domain1 -f /root/mypassword
-t /home/glassfish3/glassfish/domains</code></pre>
</div>
</div>
<div id="sthref30" class="paragraph">
<p>asupgrade Command-Line Options</p>
</div>
<div class="paragraph">
<p>Listed below are the <code>asupgrade</code> command-line options, including the
short form, the long form, and a description of each option.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 26%;">
<col style="width: 26%;">
<col style="width: 48%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Short Form</th>
<th class="tableblock halign-left valign-top">Long Form</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-c</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--console</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Launches the upgrade command line utility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-V</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the GlassFish Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-h</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--help</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays the arguments for launching the upgrade
utility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-s</code> source-domain-directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--source</code> source-domain-directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
domain-dir directory in the source (older) server installation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t</code> target-domains-directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--target</code> target-domains-directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
desired domain-root-dir directory in the GlassFish Server 4.0 target
installation; default is as-install`/domains`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-f</code> password-file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--passwordfile</code> password-file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file containing
the administration password and the master password.</p></td>
</tr>
</tbody>
</table>
<div id="sthref31" class="paragraph">
<p>Next Steps</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browse to the URL <code>http://localhost:8080</code> to view the
domain-dir`/docroot/index.html` file. This file is brought over during
the upgrade. You may want to copy the default GlassFish Server 4.0 file
from the <code>domain1.original/docroot</code> directory and customize it for your
GlassFish Server 4.0 installation.</p>
</li>
<li>
<p>To register your installation of GlassFish Server from the
Administration Console, select the Registration item from the Common
Tasks page. For step-by-step instructions on the registration process,
click the Help button on the Administration Console.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gaejn"></a><a id="GSUPG00011"></a><a id="to-upgrade-using-the-upgrade-tool-wizard"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_upgrade_using_the_upgrade_tool_wizard">To Upgrade Using the Upgrade Tool Wizard</h4>
<div class="paragraph">
<p>This procedure explains how to use the graphical Upgrade Tool Wizard to
upgrade to GlassFish Server 4.0 from any supported older product
release. See <a href="#gjxkx">Supported Releases for Upgrade to GlassFish
Server 4.0</a> for a list of supported releases.</p>
</div>
<div id="sthref32" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Ensure that the source domains from which you are upgrading are stopped
before proceeding.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install GlassFish Server 4.0 using the Typical
Installation path.<br>
See "<a href="../installation-guide/toc.html#GSING00025">Installing GlassFish Server From a Self-Extracting
Bundle</a>" in GlassFish Server Open Source Edition Installation Guide for
instructions.</p>
</li>
<li>
<p>Copy any custom or third-party libraries that may be located in the
source as-install`/lib` directory to the target as-install`/lib`
directory.<br>
Custom and third-party libraries should normally be located in the
domain-dir`/lib` directory. This step is only necessary for custom or
third-party libraries that may be located in the nonstandard
as-install`/lib` directory.</p>
</li>
<li>
<p>Start the Upgrade Tool wizard from a command shell for your
operating environment.<br></p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>Use the Upgrade Tool that is located in the target GlassFish Server 4.0
installation, not the older source installation.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>On UNIX systems<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>as-install/bin/asupgrade</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>On Windows systems<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>as-install\bin\asupgrade.bat</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Tip:</p>
</div>
<div class="paragraph">
<p>You may find it faster to run the <code>asupgrade</code> command with the <code>s</code>
source-domain-directory option, which will prefill the Source Domain
Directory field in the next step.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Source Domain Directory field, type the domain directory of
the existing installation from which to import the configuration, or
click Browse.<br>
For example, you might type <code>c:\glassfish\domains\domain1</code>.</p>
</li>
<li>
<p>In the Target Domains Root Directory field, type the location of the
GlassFish Server 4.0 installation to which to transfer the
configuration, or click Browse.<br>
The default is the full path name of the <code>domains</code> directory of your
GlassFish Server 4.0 installation (for example,
<code>c:\glassfish3\glassfish\domains</code>).</p>
</li>
<li>
<p>Provide the master password of the source application server.<br>
The domain will be upgraded using these credentials. If you do not
specify a password here, the default master password is used.<br></p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>GlassFish Server 4.0 does not support NSS authentication. If you are
upgrading from a Enterprise Profile configuration that uses NSS
authentication, follow the procedure in <a href="#gktnh">Upgrading
Installations That Use NSS Cryptographic Tokens</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Next.<br>
If a name used for an older domain that you are upgrading already exists
in the new target domains directory, Upgrade Tool will ask if you want
to rename the new directory so the old directory can be copied to the
new installation.</p>
<div class="ulist">
<ul>
<li>
<p>If you click OK in response, the directory is renamed
domain-name`.original`. If that name already exists, the directory will
be renamed domain-name`.orginal.0`. For example, if the old domain
directory is named <code>domain1</code>, it will be renamed <code>domain1.original</code>, or
if that name already exists, <code>domain1.original.0</code>.</p>
</li>
<li>
<p>If you click No, you brought back to the main screen.<br>
The domain is upgraded and the Upgrade Results page displays the status
of the upgrade operation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Review the output in the Upgrade Results page to verify that the
upgrade proceeded correctly.<br>
If there are any <code>SEVERE</code> or <code>WARNING</code> messages in the <code>server.log</code>
file, the upgrade output will say
<code>"Possible error encountered during upgrade. See server log after upgrade process completes."</code></p>
</li>
<li>
<p>Click Finish to exit the Upgrade Tool when the upgrade process is
complete.</p>
</li>
<li>
<p>Start the upgraded GlassFish Server 4.0 domain.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin start-domain domain-name</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you are upgrading a clustered configuration or a configuration in
which node agents were used, proceed with the instructions in
<a href="#gfybw">Upgrading Clusters and Node Agent Configurations</a>.</p>
</li>
</ol>
</div>
<div id="sthref33" class="paragraph">
<p>Next Steps</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browse to the URL <code>http://localhost:8080</code> to view the
domain-dir`/docroot/index.html` file. This file is brought over during
the upgrade. You may want to copy the default GlassFish Server 4.0 file
from the <code>domain1.original/docroot</code> directory and customize it for your
GlassFish Server 4.0 installation.</p>
</li>
<li>
<p>To register your installation of GlassFish Server from the
Administration Console, select the Registration item from the Common
Tasks page. For step-by-step instructions on the registration process,
click the Help button on the Administration Console.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkthu"></a><a id="GSUPG00041"></a><a id="performing-an-in-place-upgrade-with-the-update-center-tools"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performing_an_in_place_upgrade_with_the_update_center_tools">Performing an In-Place Upgrade With the Update Center Tools</h3>
<div class="paragraph">
<p>This section explains how to use the three Update Center tools to
perform an in-place upgrade to GlassFish Server 4.0 from GlassFish
Server 3.0.1 or Enterprise Server v3. Specifically, the three tools
explained in this section are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update Tool</p>
</li>
<li>
<p>Software Update Notifier</p>
</li>
<li>
<p>The <code>pkg</code> command-line utility</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>GlassFish Server 3.0.1 and Enterprise Server v3 are the only product
releases that can be upgraded to the 4.0 release with the Update Center
tools. If you are upgrading from any other product release, you must use
Upgrade Tool, as described in <a href="#abmbr">Performing a Side-By-Side
Upgrade With Upgrade Tool</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gkthx">Update Center Tool Procedures</a></p>
</li>
<li>
<p><a href="#gktjf">To Upgrade Using the Update Tool GUI</a></p>
</li>
<li>
<p><a href="#gkuhu">To Upgrade Using the Software Update Notifier</a></p>
</li>
<li>
<p><a href="#gktks">To Upgrade From the Command Line Using the <code>pkg</code> Utility</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkthx"></a><a id="GSUPG00068"></a><a id="update-center-tool-procedures"></a></p>
</div>
<div class="sect3">
<h4 id="_update_center_tool_procedures">Update Center Tool Procedures</h4>
<div class="paragraph">
<p>Unlike when using Upgrade Tool, when you use the Update Tool, the
Software Update Notifier, or the <code>pkg</code> utility to perform a GlassFish
Server 4.0 upgrade, the older source server directories are overwritten
with the new target server directories, and the existing configuration
and deployed applications are reused in the updated installation.</p>
</div>
<div class="paragraph">
<p>To perform the upgrade, the user who runs the upgrade needs to have read
and writer permissions for the server installation directories.</p>
</div>
<div class="paragraph">
<p>You can perform an upgrade using the Update Center tools in the
following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gktjf">To Upgrade Using the Update Tool GUI</a></p>
</li>
<li>
<p><a href="#gkuhu">To Upgrade Using the Software Update Notifier</a></p>
</li>
<li>
<p><a href="#gktks">To Upgrade From the Command Line Using the <code>pkg</code> Utility</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktjf"></a><a id="GSUPG00012"></a><a id="to-upgrade-using-the-update-tool-gui"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_upgrade_using_the_update_tool_gui">To Upgrade Using the Update Tool GUI</h4>
<div class="paragraph">
<p>This procedure explains how to use the graphical Update Tool to perform
an in-place upgrade to GlassFish Server 4.0 from GlassFish Server 3.0.1
or Enterprise Server v3. Note that it is not possible to use this
procedure with any other product releases.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that all domains on the source server from which you are
upgrading are stopped before proceeding.</p>
</li>
<li>
<p>In a command shell for your operating environment, navigate to the
as-install-parent`/bin` directory.</p>
</li>
<li>
<p>Use the <code>updatetool</code> command to start the Update Tool GUI.<br>
The Update Tool main window is displayed.</p>
</li>
<li>
<p>Click on Available Updates.</p>
</li>
<li>
<p>Select all items in the Available Updates list, and then click the
Install button in the toolbar at the top of the Update Tool main window.<br>
When the upgrade is complete, exit Update Tool.</p>
</li>
<li>
<p>Upgrade the domain by starting the DAS with the <code>--upgrade</code> option.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>as-install/bin/asadmin start-domain --upgrade domain-name</pre>
</div>
</div>
<div class="paragraph">
<p>This upgrades the domain and then shuts down the DAS.
7.  Start the DAS normally.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">as-install/bin/asadmin start-domain domain-name</code></pre>
</div>
</div>
<div id="sthref34" class="paragraph">
<p>Next Steps</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browse to the URL <code>http://localhost:8080</code> to view the
domain-dir`/docroot/index.html` file. This file is brought over during
the upgrade. You may want to copy the default GlassFish Server 4.0 file
from the <code>domain1.original/docroot</code> directory and customize it for your
GlassFish Server 4.0 installation.</p>
</li>
<li>
<p>To register your installation of GlassFish Server from the
Administration Console, select the Registration item from the Common
Tasks page. For step-by-step instructions on the registration process,
click the Help button on the Administration Console.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkuhu"></a><a id="GSUPG00013"></a><a id="to-upgrade-using-the-software-update-notifier"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_upgrade_using_the_software_update_notifier">To Upgrade Using the Software Update Notifier</h4>
<div class="paragraph">
<p>This procedure explains how to use the Software Update Notifier to
perform an in-place upgrade to GlassFish Server 4.0 from GlassFish
Server 3.0.1 or Enterprise Server v3. Note that it is not possible to
use this procedure with any other product releases.</p>
</div>
<div id="sthref35" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>The Software Update Notifier must be installed and enabled on the
GlassFish Server or Enterprise Server release from which you are
upgrading. Software Update Notifier installation is typically performed
during the initial GlassFish Server or Enterprise Server installation.
The Software Update Notifier can also be installed later using Update
Tool. For more information about the Update Notifier, refer to the
Update Tool online help.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Wait for the Software Update Notifier to pop up a notification
balloon informing you that updates are available.</p>
</li>
<li>
<p>Click the balloon prompt to open the Software Update GUI.</p>
</li>
<li>
<p>Manually stop all domains and server instances.</p>
</li>
<li>
<p>Using the Software Update GUI, select the items you want to upgrade
and start the installation.<br>
Ensure that GlassFish Server 4.0 is one of the items you select for
upgrade. This upgrades the server and selected components to the latest
available versions.</p>
</li>
<li>
<p>Upgrade the domain by starting the DAS with the <code>--upgrade</code> option.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>as-install/bin/asadmin start-domain --upgrade domain-name</pre>
</div>
</div>
<div class="paragraph">
<p>This upgrades the domain and then shuts down the DAS.
6.  Start the DAS normally.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">as-install/bin/asadmin start-domain domain-name</code></pre>
</div>
</div>
<div id="sthref36" class="paragraph">
<p>Next Steps</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browse to the URL <code>http://localhost:8080</code> to view the
domain-dir`/docroot/index.html` file. This file is brought over during
the upgrade. You may want to copy the default GlassFish Server 4.0 file
from the <code>domain1.original/docroot</code> directory and customize it for your
GlassFish Server 4.0 installation.</p>
</li>
<li>
<p>To register your installation of GlassFish Server from the
Administration Console, select the Registration item from the Common
Tasks page. For step-by-step instructions on the registration process,
click the Help button on the Administration Console.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktks"></a><a id="GSUPG00014"></a><a id="to-upgrade-from-the-command-line-using-the-pkg-utility"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_upgrade_from_the_command_line_using_the_code_pkg_code_utility">To Upgrade From the Command Line Using the <code>pkg</code> Utility</h4>
<div class="paragraph">
<p>This procedure explains how to use the <code>pkg</code> utility to perform an
in-place upgrade to GlassFish Server 4.0 from GlassFish Server 3.0.1 or
Enterprise Server v3. Note that it is not possible to use this procedure
with any other product releases.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that all domains on the source server from which you are
upgrading are stopped before proceeding.</p>
</li>
<li>
<p>In a command shell for your operating environment, navigate to the
as-install-parent`/bin` directory.</p>
</li>
<li>
<p>Use the <code>pkg image-update</code> command to update your entire GlassFish
Server 3.0.1 or Enterprise Server v3 installation to GlassFish Server
4.0.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>./pkg image-update</pre>
</div>
</div>
<div class="paragraph">
<p>This upgrades the server components to the latest available versions.
4.  Upgrade the domain by starting the DAS with the <code>--upgrade</code> option.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">as-install/bin/asadmin start-domain --upgrade domain-name</code></pre>
</div>
</div>
<div class="paragraph">
<p>This upgrades the domain and then shuts down the DAS.
5.  Start the DAS normally.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">as-install/bin/asadmin start-domain domain-name</code></pre>
</div>
</div>
<div id="sthref37" class="paragraph">
<p>Next Steps</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browse to the URL <code>http://localhost:8080</code> to view the
domain-dir`/docroot/index.html` file. This file is brought over during
the upgrade. You may want to copy the default GlassFish Server 4.0 file
from the <code>domain1.original/docroot</code> directory and customize it for your
GlassFish Server 4.0 installation.</p>
</li>
<li>
<p>To register your installation of GlassFish Server from the
Administration Console, select the Registration item from the Common
Tasks page. For step-by-step instructions on the registration process,
click the Help button on the Administration Console.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktnh"></a><a id="GSUPG00042"></a><a id="upgrading-installations-that-use-nss-cryptographic-tokens"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_installations_that_use_nss_cryptographic_tokens">Upgrading Installations That Use NSS Cryptographic Tokens</h3>
<div class="paragraph">
<p>GlassFish Server v2.x EE (Enterprise Edition) uses Network Security
Services (NSS) for cryptographic software tokens. GlassFish Server 4.0
does not support NSS, so when performing an upgrade from v2.x EE to 4.0
additional manual configuration steps must be performed.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gktnq">To Prepare for the Upgrade</a></p>
</li>
<li>
<p><a href="#gktlz">To Perform Post-Upgrade Configuration</a></p>
</li>
<li>
<p><a href="#gktlp">To Upgrade PKCS#11 Hardware Tokens</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktnq"></a><a id="GSUPG00015"></a><a id="to-prepare-for-the-upgrade"></a></p>
</div>
<div class="sect3">
<h4 id="_to_prepare_for_the_upgrade">To Prepare for the Upgrade</h4>
<div class="paragraph">
<p>This procedure explains how to prepare for modifying an NSS-based
GlassFish Server 2.x installation when upgrading to GlassFish Server
4.0.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install GlassFish Server 4.0 using the Typical
Installation path.<br>
Ensure that you install the new GlassFish Server 4.0 product in a
directory that is different than the one used for the older installation
from which you are upgrading.<br>
See "<a href="../installation-guide/toc.html#GSING00025">Installing GlassFish Server From a Self-Extracting
Bundle</a>" in GlassFish Server Open Source Edition Installation Guide for
instructions.</p>
</li>
<li>
<p>Rename the new GlassFish Server 4.0 domain-dir (the default is
as-install`/domains/domain1`) to a name of your choice.<br>
In this procedure, <code>31domain</code> is used for the renamed GlassFish Server
4.0 domain.</p>
</li>
<li>
<p>Copy the older source domain to be upgraded to the new GlassFish
Server 4.0 as-install`/domains` directory.<br>
In this procedure, <code>domain1</code> is used for the older source domain that is
copied to the new GlassFish Server 4.0 installation.<br></p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>The remaining steps in this procedure are performed on the copy of your
source domain that you created in this step, rather than on your
original source domain. It is strongly recommended that you perform the
GlassFish Server 4.0 upgrade on a copy of your old domain rather than on
the original.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the <code>server.policy</code>, <code>keystore.jks</code>, and <code>cacerts.jks</code> files
from the renamed <code>./31domain/config</code> directory to the <code>./domain1/config</code>
directory to be upgraded.<br>
For example:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cp as-install/domains/31domain/config/server.policy as-install/domains/domain1/config
cp as-install/domains/31domain/config/keystore.jks as-install/domains/domain1/config
cp as-install/domains/31domain/config/cacerts.jks as-install/domains/domain1/config</pre>
</div>
</div>
<div class="paragraph">
<p>This will overwrite the master password for <code>./domain1</code> with the
password used in the <code>./31domain</code>.
5.  Modify the <code>domain.xml</code> file for <code>./domain1</code>.
1.  Add the following <code>jvm-options</code> under <code>server-config</code> and
<code>default-config</code>:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">-Djavax.net.ssl.keyStore=${com.sun.aas.instanceRoot}/config/keystore.jks
-Djavax.net.ssl.trustStore=${com.sun.aas.instanceRoot}/config/cacerts.jks</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove the following <code>jvm-option</code> under <code>server-config</code> and
<code>default-config</code>:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>-Dcom.sun.appserv.nss.db=${com.sun.aas.instanceRoot}/config</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Upgrade <code>./domain1</code> by starting the DAS in the new GlassFish Server
4.0 installation with the <code>--upgrade</code> option.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>as-install/bin/asadmin start-domain --upgrade domain1</pre>
</div>
</div>
<div class="paragraph">
<p>This upgrades the domain and then shuts down the DAS.
7.  Start the upgraded DAS normally.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">as-install/bin/asadmin start-domain domain1</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="gktlz"></a><a id="GSUPG00016"></a><a id="to-perform-post-upgrade-configuration"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_perform_post_upgrade_configuration">To Perform Post-Upgrade Configuration</h4>
<div class="paragraph">
<p>These instructions explain the post-upgrade configuration steps that
must be performed when upgrading from an NSS-based installation to
GlassFish Server 4.0.</p>
</div>
<div id="sthref38" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Before proceeding with this procedure, complete the procedure explained
in <a href="#gktnq">To Prepare for the Upgrade</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the GlassFish Server 4.0 domain, if it is not already running,
and open the GlassFish Server Admin Console in a browser window.<br>
The default URL is <code>https://localhost:4848</code><br>
As part of the <a href="#gktnq">To Prepare for the Upgrade</a> procedure, the
default keystore with a default self-signed key-certificate pair with an
alias named <code>s1as</code> and a keystore password <code>changeit</code> was copied into
the v2.x domain before the upgrade.</p>
</li>
<li>
<p>If your default server alias in the NSS v2.x domain is not <code>s1as</code>,
you can delete this entry using the following command:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>keytool -delete -keystore keystore.jks -storepass changeit -alias s1as
keytool -delete -keystore cacerts.jks -storepass changeit -alias s1as</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the master password for the v2.x domain is not the default
password <code>changeit</code>, you need to change the new keystore password to
match the v2.x master password.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>keytool -storepasswd -new v2-master-password \
-keystore keystore.jks -storepass changeit
keytool -storepasswd -new v2-master-password \
-keystore cacerts.jks -storepass changeit</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Take note of all the <code>KeyEntries</code> that exist in your NSS database.<br>
These entries must be migrated to the <code>keystore.jks</code> in the GlassFish
Server 4.0 domain. The following command can be used to list all the
<code>KeyEntries</code> in the NSS database:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>certutil -L -d $AS_NSS_DB</pre>
</div>
</div>
<div class="paragraph">
<p><code>AS_NSS_DB</code> should point to the <code>${com.sun.aas.instanceRoot}/config</code> for
the 4.0 instance into which the v2.x domain was copied. The listing with
the attribute combinations <code>u,u,u</code> are the <code>KeyEntries</code>.<br>
For example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">s1as u,u,u</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>To run the <code>certutil</code> command, your <code>LD_LIBRARY_PATH</code> must point to the
directory containing NSS library and DLLs.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For each <code>PrivateKey-Certificate</code> pair (<code>KeyEntry</code>) that exists in
the v2.x NSS database, use the following commands to export them from
the NSS database and import them into the newly created <code>keystore.jks</code>
file.<br>
Make sure you use the same alias when importing the <code>KeyEntry</code> into the
JKS keystore. For example, if s1as is the only alias present in the NSS
database, the following command can be used:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; pk12util -o /tmp/s1as_pk.p12 -n s1as -d $AS_NSS_DB
&gt;keytool -importkeystore -srckeystore /tmp/s1as_pk.p12 -destkeystore \
${com.sun.aas.instanceRoot}/config/keystore.jks -srcstoretype PKCS12 \
-deststoretype JKS -srcstorepass v2-master-password \
-deststorepass v3-master-password -srcalias s1as \
-destalias s1as -srckeypass v2-master-password \
-destkeypass v3-master-password</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>The reference to v3-master-password could be the same as
v2-master-password if you intend to retain the same master password for
the 4.0 domain after upgrading from v2.x.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the <code>s1as</code> alias represents a <code>KeyEntry</code> with a self-signed
certificate, the self-signed certificate must be copied to the
<code>truststore</code>.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;certutil -L -n s1as -r -d $AS_NSS_DB&gt; /tmp/s1as.der&gt;keytool -import -keystore cacerts.jks -storepass v3-master-password \
-file /tmp/s1as.der -alias s1as</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>There is a rare chance that the 2.x NSS database has some CA
(Certificate Authority) certificates that are absent in the default
created <code>truststore</code>. In such cases, all aliases that are missing in the
<code>truststore</code> (<code>cacerts.jks</code>) need to collected.</p>
</li>
<li>
<p><code>certutil -L -d $AS_NSS_DB</code><br>
Example output:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>verisignc1g1 T,c,c
verisignc1g2 T,c,c
verisignc1g3 T,c,c</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>keytool -list -keystore cacerts.jks -storepass</code> v3-master-password<br>
Example output:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>godaddyclass2ca, Jan 20, 2005, trustedCertEntry,
Certificate fingerprint (MD5): 91:DE:06:25:AB:DA:FD:32:17:0C:BB:25:17:2A:84:67
verisignclass1g3ca, Mar 26, 2004, trustedCertEntry,
Certificate fingerprint (MD5): B1:47:BC:18:57 1:18:A0:78:2D:EC:71:E8:2A:95:73
secomevrootca1, May 1, 2008, trustedCertEntry,
Certificate fingerprint (MD5): 22:2D:A6:01:EA:7C:0A:F7:F0:6C:56:43:3F:77:76 3</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For each of the aliases from the <code>certutil</code> output in the preceding
step that are required but missing in the <code>truststore</code> listing, execute
the following commands to export and import them into the 4.0 domain&#8217;s
<code>truststore</code>.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;certutil -L -n verisignc1g1 -r -d $AS_NSS_DB&gt; /tmp/verisignc1g1.der&gt;keytool -import -keystore cacerts.jks -storepass v3-master-password \
-file /tmp/verisignc1g1.der -alias verisignc1g1</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>Sometimes just the alias names that are used in the NSS database are
different, and the same certificate is, in fact, present in the 4.0
default <code>truststore</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="gktlp"></a><a id="GSUPG00017"></a><a id="to-upgrade-pkcs11-hardware-tokens"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_upgrade_pkcs_11_hardware_tokens">To Upgrade PKCS#11 Hardware Tokens</h4>
<div class="paragraph">
<p>If you are using GlassFish Server v2.x Enterprise Edition with Hardware
Tokens (for example, FIPS-140 compliant Sun Cryptographic Accelerator
6000 or other Sun Cryptographic Accelerators) configured by means of
NSS-PKCS11, then the v2.x EE-to-4.0 upgrade solution is to directly
configure the Hardware Token as a PKCS11 token using the JDK-JSSE
supported mechanisms for configuring PKCS#11 tokens.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the <code>javax.net.ssl.keyStoreType</code> <code>jvm-options</code> in GlassFish
Server 4.0 to PKCS11.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;jvm-options&gt;-Djavax.net.ssl.keyStoreType=PKCS11&lt;/jvm-options&gt;</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the <code>javax.net.ssl.keyStore</code> URL should be set to l since this
is a hardware token.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;jvm-options&gt;-Djavax.net.ssl.keyStore=NONE&lt;/jvm-options&gt;</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change the password for the <code>truststore</code> and the GlassFish Server
<code>MasterPassword</code> to match the PIN of your <code>HardwareToken</code>.</p>
</li>
<li>
<p>Since you are using a Hardware Token, you can delete the
<code>keystore.jks</code> for the migrated domain.</p>
</li>
<li>
<p>Ensure the <code>token-alias</code> for the hardware token (private key) that
you intend to use as the Server&#8217;s Key for SSL is mentioned in every
relevant place in the <code>domain.xml</code> for the domain.<br>
For example, the <code>cert-nickname</code> attribute for the <code>&lt;ssl/&gt;</code> element
under the <code>protocol</code> configuration.</p>
</li>
<li>
<p>If the Hardware Token is to act as a <code>TrustStore</code> as well, remove
the <code>cacerts.jks</code> file from the domain-dir`/config` directory.<br>
Ensure that the following two <code>jvm-options</code> are set in the <code>domain.xml</code>
file:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;jvm-options&gt;-Djavax.net.ssl.trustStore=NONE&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Djavax.net.ssl.trustStoreType=PKCS11&lt;/jvm-options&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><a id="gfybw"></a><a id="GSUPG00043"></a><a id="upgrading-clusters-and-node-agent-configurations"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_clusters_and_node_agent_configurations">Upgrading Clusters and Node Agent Configurations</h3>
<div class="paragraph">
<p>This section explains additional steps you need to perform when
upgrading cluster and node agent configurations from Application Server
or Enterprise Server to GlassFish Server 4.0.</p>
</div>
<div class="paragraph">
<p>GlassFish Server 4.0 does not support node agents. As part of the
upgrade process, any node agent elements in the older source
configuration are transformed into <code>CONFIG</code> node elements in the
<code>domain.xml</code> file for the upgraded DAS. If the source node agent
configuration is incompatible with your GlassFish Server 4.0
installation, you must correct the node configuration on the upgraded
DAS.</p>
</div>
<div class="paragraph">
<p>In addition, although the source cluster configuration is retained in
the <code>domain.xml</code> file for the upgraded DAS, it is still necessary to
install GlassFish Server 4.0 on each node host and manually re-create
the server instances that are contained in the clusters.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gkyda">Overview of Cluster and Node Agent Upgrade Procedures</a></p>
</li>
<li>
<p><a href="#gktle">To Correct the Configuration of a Node After an Upgrade</a></p>
</li>
<li>
<p><a href="#gktkx">To Re-Create a Cluster</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkyda"></a><a id="GSUPG00069"></a><a id="overview-of-cluster-and-node-agent-upgrade-procedures"></a></p>
</div>
<div class="sect3">
<h4 id="_overview_of_cluster_and_node_agent_upgrade_procedures">Overview of Cluster and Node Agent Upgrade Procedures</h4>
<div class="paragraph">
<p>The general steps for upgrading a cluster and node agent configuration
so it will work in GlassFish Server 4.0 are as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Perform a side-by-side upgrade of the DAS. This procedure is
described in <a href="#abmbr">Performing a Side-By-Side Upgrade With Upgrade
Tool</a>.</p>
</li>
<li>
<p>Perform new (not upgrade) GlassFish Server 4.0 installations on each
node host. GlassFish Server 4.0 installation instructions are provided
in the <a href="../installation-guide/toc.html#GSING">GlassFish Server Open Source Edition Installation
Guide</a>.</p>
</li>
<li>
<p>Correct the node configuration on the upgraded DAS, if necessary.
This procedure is described in <a href="#gktle">To Correct the Configuration
of a Node After an Upgrade</a>.</p>
</li>
<li>
<p>Re-create the clusters and server instances on each GlassFish Server
4.0 node host. This procedure is described in <a href="#gktkx">To Re-Create a
Cluster</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="gktle"></a><a id="GSUPG00018"></a><a id="to-correct-the-configuration-of-a-node-after-an-upgrade"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_correct_the_configuration_of_a_node_after_an_upgrade">To Correct the Configuration of a Node After an Upgrade</h4>
<div class="paragraph">
<p>As part of the upgrade process, node agent elements in the DAS
configuration are transformed into GlassFish Server node elements of
type <code>CONFIG</code>. This transformation does not affect the node agent
directories for GlassFish Server instances. To create the equivalent
directories for GlassFish Server instances after an upgrade, you must
re-create the instances as explained in <a href="#gktkx">To Re-Create a
Cluster</a>.</p>
</div>
<div class="paragraph">
<p>The name of an upgraded node is the name of the node agent from which
the node is transformed.</p>
</div>
<div class="paragraph">
<p>The host that the node represents is obtained from the configuration of
the original node agent or, if not specified, is not set. If the
configuration of the original node agent did not specify the name of the
node host, you must update the node to specify the host that the node
represents.</p>
</div>
<div class="paragraph">
<p>Default values are applied to the remainder of the node&#8217;s configuration
data.</p>
</div>
<div class="paragraph">
<p>The default values of the following items in a node&#8217;s configuration data
might not meet your requirements for the upgraded installation of
GlassFish Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The parent of the base installation directory of the GlassFish Server
software on the host, for example, <code>/export/glassfish3</code>.<br>
The default is the parent of the default base installation directory of
the GlassFish Server 4.0 software on the DAS host. If the GlassFish
Server software is installed under a different directory on the node
host, you must update the node&#8217;s configuration to specify the correct
directory.</p>
</li>
<li>
<p>The directory that will contain the GlassFish Server instances that
are to reside on the node.<br>
The default is as-install`/nodes`, where as-install is the base
installation directory of the GlassFish Server software on the host. If
you require the instances to be contained in a different directory, you
must update the node&#8217;s configuration to specify that directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are using secure shell (SSH) for centralized administration, you
must also change the type of the node to <code>SSH</code> to enable the node for
remote communication.</p>
</div>
<div class="paragraph">
<p>For more information about GlassFish Server nodes, see
"<a href="../ha-administration-guide/nodes.html#GSHAG00004">Administering GlassFish Server Nodes</a>" in GlassFish
Server Open Source Edition High Availability Administration Guide.</p>
</div>
<div id="sthref39" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Ensure that the following prerequisites are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A side-by-side upgrade on the DAS has been performed. For more
information, see <a href="#abmbr">Performing a Side-By-Side Upgrade With
Upgrade Tool</a>.</p>
</li>
<li>
<p>If you are changing the type of the node to <code>SSH</code>, ensure that SSH is
configured on the host where the DAS is running and on the host that the
node represents. For more information, see "<a href="../ha-administration-guide/ssh-setup.html#GSHAG00003">Setting Up
SSH for Centralized Administration</a>" in GlassFish Server Open Source
Edition High Availability Administration Guide.</p>
</li>
<li>
<p>If you are upgrading from an Enterprise Profile configuration that
uses NSS authentication, ensure that the procedure in
<a href="#gktnh">Upgrading Installations That Use NSS Cryptographic Tokens</a>
has been performed. GlassFish Server 4.0 does not support NSS
authentication.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the DAS is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>Update the node&#8217;s configuration data to specify the correct
directories and, if necessary, change the type of the node.<br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>Only the options that are required to complete this task are provided in
this step. For information about all the options for changing the node&#8217;s
configuration data, see the <a href="../reference-manual/update-node-ssh001.html#GSRFM00256"><code>update-node-ssh</code>(1)</a> help
page or the <a href="../reference-manual/update-node-config.html#GSRFM00255"><code>update-node-config</code>(1)</a> help page.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; node-update-subcommand [--installdir as-install-parent] [--nodedir node-dir]
[--nodehost node-host] node-name</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">node-update-subcommand</dt>
<dd>
<p>The subcommand to run to update the node.<br></p>
<div class="ulist">
<ul>
<li>
<p>If you are leaving the type of the node as <code>CONFIG</code>, run the
<code>update-node-config</code> subcommand on the node.</p>
</li>
<li>
<p>If you are changing the type of the node to <code>SSH</code>, run the
<code>update-node-ssh</code> subcommand on the node.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">as-install-parent</dt>
<dd>
<p>The full path to the parent of the base installation directory of the
GlassFish Server software on the host, for example,
<code>/export/glassfish3</code>.</p>
</dd>
<dt class="hdlist1">node-dir</dt>
<dd>
<p>The path to the directory that will contain GlassFish Server instances
that are to reside on the node. If a relative path is specified, the
path is relative to the as-install directory.</p>
</dd>
<dt class="hdlist1">node-host</dt>
<dd>
<p>The name of the host that the node is to represent after the node is
updated.</p>
</dd>
<dt class="hdlist1">node-name</dt>
<dd>
<p>The name of the node to update. This name is the name of the node
agent from which the node was transformed.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a id="GSUPG00008"></a><a id="gktoh"></a></p>
</div>
<div class="paragraph">
<p>Example 2-2 Correcting the Configuration of a Node After an Upgrade</p>
</div>
<div class="paragraph">
<p>This example updates the path to the directory that will contain
instances that are to reside on the node <code>xk01</code> to
<code>/export/home/gf/nodes</code>. Because this node is transformed from a node
agent, the type of the node is <code>CONFIG</code>. Therefore, type of the node is
not changed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; update-node-config --nodedir /export/home/gf/nodes xk01
Command update-node-config executed successfully.</code></pre>
</div>
</div>
<div id="sthref40" class="paragraph">
<p>Next Steps</p>
</div>
<div class="paragraph">
<p>Re-create the cluster configuration from the older source installation
in the new GlassFish Server 4.0 installation in as explained in
<a href="#gktkx">To Re-Create a Cluster</a>.</p>
</div>
<div id="sthref41" class="paragraph">
<p>See Also</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"<a href="../ha-administration-guide/ssh-setup.html#GSHAG00003">Setting Up SSH for Centralized Administration</a>" in
GlassFish Server Open Source Edition High Availability Administration
Guide</p>
</li>
<li>
<p>"<a href="../ha-administration-guide/nodes.html#GSHAG00004">Administering GlassFish Server Nodes</a>" in GlassFish
Server Open Source Edition High Availability Administration Guide</p>
</li>
<li>
<p><a href="../reference-manual/update-node-config.html#GSRFM00255"><code>update-node-config</code>(1)</a></p>
</li>
<li>
<p><a href="../reference-manual/update-node-ssh001.html#GSRFM00256"><code>update-node-ssh</code>(1)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktkx"></a><a id="GSUPG00019"></a><a id="to-re-create-a-cluster"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_re_create_a_cluster">To Re-Create a Cluster</h4>
<div class="paragraph">
<p>This procedure explains how to re-create a clustered GlassFish Server or
Enterprise Server configuration for GlassFish Server 4.0.</p>
</div>
<div id="sthref42" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Before proceeding with these instructions, ensure that you have
completed the following procedures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Perform the standard upgrade to GlassFish Server 4.0 on the DAS, as
described in <a href="#abmbr">Performing a Side-By-Side Upgrade With Upgrade
Tool</a>.</p>
</li>
<li>
<p>Perform a new (not upgrade) installation of GlassFish Server 4.0 on
each node host. See the <a href="../installation-guide/toc.html#GSING">GlassFish Server Open Source Edition
Installation Guide</a> for instructions.</p>
</li>
<li>
<p>Correct the upgraded node configuration, if necessary, as described
<a href="#gktle">To Correct the Configuration of a Node After an Upgrade</a>.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the upgraded DAS.<br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin&gt; start-domain domain-name</pre>
</div>
</div>
<div class="paragraph">
<p>If the upgrade succeeded, the migrated cluster configuration exists and
the <code>get-health</code> subcommand lists the status of the clustered instances
as not running.
2.  Confirm that the cluster configuration exists and contains all its
instances.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; get-health cluster-name</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, for the sample <code>cluster1</code> used in this procedure:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; get-health cluster1
instance1 not started
instance2 not started
Command get-health executed successfully.</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Re-create the clustered server instances on each instance host.<br>
The specific commands to use depend on your configuration.</p>
<div class="ulist">
<ul>
<li>
<p>If remote hosts cannot contact the DAS, export and import the
instances' configuration data, as explained in "<a href="../ha-administration-guide/instances.html#GSHAG00125">To
Resynchronize an Instance and the DAS Offline</a>" in GlassFish Server Open
Source Edition High Availability Administration Guide.</p>
</li>
<li>
<p>If remote hosts can contact the DAS, create each instance individually
and resynchronize the instance with the DAS, as explained in the
following sections:</p>
<div class="ulist">
<ul>
<li>
<p>"<a href="../ha-administration-guide/instances.html#GSHAG00114">To Create an Instance Locally</a>" in GlassFish Server
Open Source Edition High Availability Administration Guide</p>
</li>
<li>
<p>"<a href="../ha-administration-guide/instances.html#GSHAG00119">To Resynchronize an Instance and the DAS Online</a>"
in GlassFish Server Open Source Edition High Availability Administration
Guide<br>
Note that the node name matches that used for the node agent in the 2.x
installation. If you get an error stating that some attributes do not
match the values in the DAS configuration, follow the instructions in
<a href="#gktle">To Correct the Configuration of a Node After an Upgrade</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>After creating the instances, manually copy the instance-dir`/imq`
directory for each instance from the older source installation to the
target GlassFish Server 4.0 installation.</p>
</li>
<li>
<p>If necessary, start the cluster.<br>
For example:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin&gt; start-cluster cluster1</pre>
</div>
</div>
<div class="paragraph">
<p>This step may or may not be necessary, depending on the procedure you
used to create the server instances for the cluster.</p>
</div>
<div class="paragraph">
<p><a id="GSUPG00009"></a><a id="gkyin"></a></p>
</div>
<div class="paragraph">
<p>Example 2-3 Creating Two Local Instances</p>
</div>
<div class="paragraph">
<p>The following example shows how to create two local instances in a
cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">host1$ asadmin --host dashost create-local-instance --node na1 --cluster cluster1 instance1
host2$ asadmin --host dashost create-local-instance --node na2 --cluster cluster1 instance2</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dashost</code></dt>
<dd>
<p>The name of the DAS host.</p>
</dd>
<dt class="hdlist1"><code>na1</code></dt>
<dd>
<p>The name of the node host.</p>
</dd>
<dt class="hdlist1"><code>cluster1</code></dt>
<dd>
<p>The name of the cluster.</p>
</dd>
<dt class="hdlist1"><code>instance1</code>, <code>instance2</code></dt>
<dd>
<p>The names of the instances.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a id="gkrfh"></a><a id="GSUPG00044"></a><a id="correcting-potential-upgrade-problems"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_correcting_potential_upgrade_problems">Correcting Potential Upgrade Problems</h3>
<div class="paragraph">
<p>This section addresses issues that can occur during an upgrade to
GlassFish Server 4.0.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gkrgh">Cluster Profile Security Setting</a></p>
</li>
<li>
<p><a href="#gkrib">Cluster Profile Upgrade on Windows</a></p>
</li>
<li>
<p><a href="#gkyho"><code>asupgrade</code> Fails Without Internet Connection</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkrgh"></a><a id="GSUPG00070"></a><a id="cluster-profile-security-setting"></a></p>
</div>
<div class="sect3">
<h4 id="_cluster_profile_security_setting">Cluster Profile Security Setting</h4>
<div class="paragraph">
<p>When upgrading a clustered domain configuration from Application Server
9.1 or Enterprise Server v2 to GlassFish Server 4.0, you may encounter
problems if the <code>admin-service</code> element in the DAS <code>domain.xml</code> file
sets both of the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>security-enabled=true</code></p>
</li>
<li>
<p><code>type=das-and-server</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>security-enabled</code> attribute must be set to <code>false</code> in the
<code>admin-service</code> element for the DAS when <code>type</code> is set to
<code>das-and-server</code>.</p>
</div>
<div class="paragraph">
<p>You can use the <code>get</code> subcommand to determine the values for these two
attributes. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To display the value for the <code>security-enabled</code> attribute:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin&gt; get configs.config.server-config.admin-service.jmx-connector.system.security-enabled</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To display the value for the type attribute:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin&gt; get configs.config.server-config.admin-service.type</pre>
</div>
</div>
<div class="paragraph">
<p>If necessary, use the <code>set</code> subcommand to set <code>security-enabled=false</code>.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; set configs.config.server-config.admin-service.jmx-connector.system.security-enabled=false</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="gkrib"></a><a id="GSUPG00071"></a><a id="cluster-profile-upgrade-on-windows"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_cluster_profile_upgrade_on_windows">Cluster Profile Upgrade on Windows</h4>
<div class="paragraph">
<p>On Windows, when you upgrade cluster profile domains, you could
encounter the following error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">Fatal error while backing up the domain directory</code></pre>
</div>
</div>
<div class="paragraph">
<p>To resolve this error, look for and remove any hidden files in the
source domain&#8217;s directory and re-run Upgrade Tool.</p>
</div>
<div class="paragraph">
<p><a id="gkyho"></a><a id="GSUPG00072"></a><a id="asupgrade-fails-without-internet-connection"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="__code_asupgrade_code_fails_without_internet_connection"><code>asupgrade</code> Fails Without Internet Connection</h4>
<div class="paragraph">
<p>This problem only occurs when using GlassFish Server 3.1 Upgrade Tool to
perform a side-by-side upgrade on a 2.x domain without an Internet
connection. It does not occur when using GlassFish Server 3.1.1.</p>
</div>
<div class="paragraph">
<p>The workaround for this issue is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the older source domain to be upgraded to the new target
domain-dir, the default for which is as-install`/domains`.<br>
Rename the target <code>domain1</code> directory, if one exists, before proceeding.</p>
</li>
<li>
<p>Run the upgrade.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin&gt; start-domain --upgrade domain-name</pre>
</div>
</div>
</div>
</div>
</div>
</div>

<hr />

<table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>		
		<td align="left">
		<a href="upgrade-compatibility-issues.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>


		<td align="right">
		<a href="toc.html">
			<span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>

<span id="copyright">
        <img src="img/eclipse_foundation_logo_tiny.png" height="20px" alt="Eclipse Foundation Logo" align="top"/>&nbsp;            
        <span >Copyright&nbsp;&copy;&nbsp;2019,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</span>
</span>
</body>
</html>